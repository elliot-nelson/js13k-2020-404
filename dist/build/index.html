<style>body,html{margin:0;padding:0;background-color:#000}div{position:absolute;top:0;bottom:0;left:0;right:0}#canvas{width:100%;height:100%}</style><div><canvas id="canvas"></canvas></div><script>!function(){"use strict";const t="WIZARD WITH A SHOTGUN",i=6*Math.PI/180,s=20*Math.PI/180,h=45*Math.PI/180,e=70*Math.PI/180,r=72*Math.PI/180,l=80*Math.PI/180,n=90*Math.PI/180,o=360*Math.PI/180,f={e(){f.n=document.getElementById("canvas"),f.t=f.n.getContext("2d"),f.c(!0)},c(t){let i=window.devicePixelRatio,s=f.n.clientWidth,h=f.n.clientHeight,e=s*i,r=h*i;(t||f.n.width!==e||f.n.height!==r)&&(f.n.width=e,f.n.height=r,f.scale=(10*Math.max(e/480,r/270)|0)/10,f.width=Math.ceil(e/f.scale),f.height=Math.ceil(r/f.scale),f.i={s:f.width/2|0,h:f.height/2|0},f.clientWidth=s,f.clientHeight=h,f.t.imageSmoothingEnabled=!1),f.n.style.cursor="none"},o(){f.t.fillRect(0,0,f.width,f.height)}};function a(t){let i=Math.sqrt(t.x*t.x+t.y*t.y);return 0===i?{x:0,y:0,l:0}:{x:t.x/i,y:t.y/i,l:i}}function u(t,i){return a({x:i.x-t.x,y:i.y-t.y})}function c(t,i){return{x:Math.cos(t),y:Math.sin(t),l:i||1}}function M(t){let i=Math.atan2(t.y,t.x);return i<0&&(i+=o),i}function A(t){return{x:t.x*(t.l||1),y:t.y*(t.l||1)}}function y(...t){let i={x:0,y:0,l:1};for(let s of t)i.x+=s.x*(s.l||1),i.y+=s.y*(s.l||1);return i}function x(t,i,s,h){for(t>i&&([t,i]=[i,t]),s>h&&([s,h]=[h,s]);h>=i+o;)h-=o,s-=o;for(;s<=t-o;)s+=o,h+=o;const e=[Math.max(t,s),Math.min(i,h)];return e[0]>e[1]?void 0:e}function O(t){return{x:32*t.u,y:32*t.r}}function w(t){return{s:t.x+f.i.s-Tt.A.M.x,h:t.y+f.i.h-Tt.A.M.y}}function T(t){return{x:t.s-f.i.s+Tt.A.M.x,y:t.h-f.i.h+Tt.A.M.y}}function E(t,i,s){return t<i?i:t>s?s:t}function S(t,i){let s,h,e=i-t;return 0===e?(h=NaN,s=1/0):e>0?(h=1/e,s=(1-(t-(0|t)))*h):(h=-1/e,s=(t-(0|t))*h),{m:s,T:h}}function*N(t,i){yield*function*(t,i){let s=t.x/32,h=t.y/32,e=i.x/32,r=i.y/32,l=Math.abs((0|s)-(0|e))+Math.abs((0|h)-(0|r));if(yield{u:0|s,r:0|h,l:0},l>1){let t=s,i=h,n=0,o=Math.sign(e-s),f=Math.sign(r-h),a=S(s,e),u=S(h,r);for(let s=0;s<l-1;s++)a.m<u.m?(t+=o,n+=o,a.m+=a.T):(i+=f,n+=f,u.m+=u.T),yield{u:0|t,r:0|i,l:n}}l>0&&(yield{u:0|e,r:0|r,l:1})}(t,y(t,i))}function U(t,i,s,h){if(Math.max(t.x,i.x)+s<h[0].x||Math.min(t.x,i.x)-s>h[1].x||Math.max(t.y,i.y)+s<h[0].y||Math.min(t.y,i.y)-s>h[1].y)return;let e=i.x-t.x,r=i.y-t.y,l=0===e?0:1/e,n=0===r?0:1/r,o=1/0,f=1/0;if(t.x-s<h[0].x&&i.x+s>h[0].x){let i=(h[0].x-s-t.x)*l;if(i>=0&&i<=1){let s=r*i+t.y;if(s>=h[0].y&&s<=h[1].y)return{x:e*i+t.x,y:s,p:i,O:-1,S:0,U:h[0].x,N:s}}o=h[0].x}if(t.x+s>h[1].x&&i.x-s<h[1].x){let n=(t.x-(h[1].x+s))*-l;if(n>=0&&n<=1){let s=r*n+i.y;if(s>=h[0].y&&s<=h[1].y)return{x:e*n+t.x,y:s,p:n,O:1,S:0,U:h[1].x,N:s}}o=h[1].x}if(t.y-s<h[0].y&&i.y+s>h[0].y){let i=(h[0].y-s-t.y)*n;if(i>=0&&i<=1){let s=e*i+t.x;if(s>=h[0].x&&s<=h[1].x)return{x:s,y:r*i+t.y,p:i,O:0,S:-1,U:s,N:h[0].y}}f=h[0].y}if(t.y+s>h[1].y&&i.y-s<h[1].y){let i=(t.y-(h[1].y+s))*-n;if(i>=0&&i<=1){let s=e*i+t.x;if(s>=h[0].x&&s<=h[1].x)return{x:s,y:r*i+t.y,p:i,O:0,S:1,U:s,N:h[0].y}}f=h[1].y}if(o===1/0&&f===1/0)return;o!==1/0&&f===1/0&&(f=r>0?h[1].y:h[0].y),f!==1/0&&o===1/0&&(o=e>0?h[1].x:h[0].x);let a=1/s,u=Math.sqrt(e*e+r*r),c=o-t.x,M=f-t.y,A=Math.sqrt(c*c+M*M),y=Math.acos((c*e+M*r)/(u*A));if(A<s)return;if(0===y){let i=(A-s)/u;if(i>1||i<0)return;let h=i*e+t.x,l=i*r+t.y,n=c/A,a=M/A;return isNaN(h)?void 0:{x:h,y:l,p:i,O:n,S:a,U:o,N:f}}let x=Math.sin(y),O=x*A*a;if(Math.abs(O)>1)return;let w=Math.PI-Math.asin(O),T=Math.PI-y-w,E=s*Math.sin(T)/x/u;if(E>1||E<0)return;let S=E*e+t.x,N=E*r+i.y,U=(S-o)*a,d=(N-f)*a;return isNaN(S)?void 0:{x:S,y:N,p:E,O:U,S:d,U:o,N:f}}function d(t,i,s){return Array.from({length:i},()=>Array.from({length:t},s))}function b(t,i){if(Tt.H){let s=Tt.H.G;if(t<s.u||i<s.r||t>=s.u+s.w||i>=s.r+s.k)return!1}return!(t<0||i<0||t>=Tt.L.w||i>=Tt.L.k||!Tt.L.L[i][t])}function H(t,i,s,h){return`rgba(${t},${i},${s},${h})`}function p(t,i){let s=document.createElement("canvas");s.width=t,s.height=i;let h=s.getContext("2d");return{n:s,t:h}}function G(t){return{x:32*(t.u+t.w/2),y:32*(t.r+t.k/2)}}function L(t,i,s){let h=E(Math.ceil(i/s*t.length),0,t.length),e=t.slice(0,h),r=t.indexOf(" ",h-1);return r<0&&(r=t.length),r-h>0&&(e+="#".repeat(r-h)),e}const C={R:[[0,0,15,15],[15,0,15,15],[30,0,15,15]],font:[[0,15,180,12]],v:[[0,27,5,5],[5,27,5,5],[10,27,5,5],[15,27,5,5]],P:[[0,32,9,9]],W:[[0,41,109,9],[109,41,109,9]],C:[[0,50,6,7],[6,50,6,7]],D:[[0,57,7,9],[7,57,7,9]],E:[[0,66,12,14],[12,66,12,14],[24,66,12,14]],K:[[0,80,21,32],[21,80,21,32],[42,80,21,32]],F:[[0,112,23,18],[23,112,23,18],[46,112,23,18],[69,112,23,18]],V:[[0,130,17,17],[17,130,17,17]],g:[[0,147,14,22],[14,147,14,22],[28,147,14,22],[42,147,14,22]],q:[[0,169,32,32]],I:[[0,201,4,4],[4,201,4,4]],B:"data:image/png;base64,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"},m={j(t){let i=new Image;i.onload=t,i.src=C.B,m.Q=i},e(){m.font=K(C.font[0]),m.Y=K(C.D[0]),m.J=K(C.D[1]),m.K=C.K.map(t=>K(t,{x:10,y:21})),m.F=C.F.map(t=>K(t,{x:11,y:14})),m.g=C.g.map(K),m.V=C.V.map(K),m.v=C.v.map(K),m.X=K(C.C[0]),m.Z=K(C.C[1]),m.W=C.W.map(K),m.W.push(R(function(t){let i=p(t.width,t.height);return i.t.drawImage(t,0,0),i.t.globalCompositeOperation="source-atop",i.t.fillStyle=H(255,255,0,.6),i.t.fillRect(0,0,t.width,t.height),i.n}(m.W[1]._))),m.P=C.P.map(K),m.E=C.E.map(K),m.q=C.q.map(K),m.q[1]=R(function(t){let i=p(32,32);return i.t.fillStyle=H(48,0,0,1),i.t.fillRect(0,0,32,32),i.t.globalAlpha=.6,i.t.globalCompositeOperation="hard-light",i.t.drawImage(t,0,0),W(i),i.n}(m.q[0]._)),m.$=R(function(t){let i=p(544,334);for(let s=0;s<334;s+=32)for(let h=0;h<544;h+=32)i.t.drawImage(t,h,s);return i.n}(m.q[0]._)),m.tt=R(function(){let t=p(500,500),i=t.t.createRadialGradient(250,250,0,250,250,250);return i.addColorStop(.3,H(0,0,0,0)),i.addColorStop(1,H(0,0,0,.9)),t.t.fillStyle=i,t.t.fillRect(0,0,500,500),t.n}());let t=C.I.map(K);m.I=R(function(t){let i=p(36,36);for(let s=0;s<36;s+=4)i.t.drawImage(t,s,0),i.t.drawImage(t,s,32),i.t.drawImage(t,0,s),i.t.drawImage(t,32,s);return W(i),i.n}(t[0]._)),m.it=R(function(t,i){let s=p(36,36);for(let t=0;t<36;t+=4)s.t.drawImage(i,t,0),s.t.drawImage(i,t,32),s.t.drawImage(i,0,t),s.t.drawImage(i,32,t);return s.t.drawImage(t,0,0),s.t.drawImage(t,32,0),s.t.drawImage(t,0,32),s.t.drawImage(t,32,32),W(s),s.n}(t[0]._,t[1]._));let i=C.R.map(K);m.st=R(function(t,i){let s=p(130,45);return s.t.drawImage(D(t).n,0,5),s.t.drawImage(i,5,0),s.n}(i[0]._,i[2]._)),m.ht=R(D(i[1]._).n)},et(t,i,s,h){t.drawImage(i._,s-i.mt.x,h-i.mt.y)},rt(t,i,s){let{s:h,h:e}=this.nt(t,i);s?(f.t.save(),f.t.translate(h+t.mt.x,e+t.mt.y),f.t.rotate(s),f.t.drawImage(t._,-t.mt.x,-t.mt.y),f.t.restore()):f.t.drawImage(t._,h,e)},nt:(t,i)=>({s:i.x-t.mt.x-Tt.A.M.x+f.i.s,h:i.y-t.mt.y-Tt.A.M.y+f.i.h})};function K(t,i){return R(function(t,i,s,h){const e=m.Q,r=p(s,h);return r.t.drawImage(e,t,i,s,h,0,0,s,h),r.n}(...t),i)}function R(t,i){let s=t.width,h=t.height;return{_:t,mt:i&&i.x?i:{x:s/2|0,y:h/2|0}}}function W(t){t.t.globalCompositeOperation="source-atop";for(let i=0;i<36;i++)for(let s=0;s<36;s++)t.t.fillStyle=H(0,0,0,.6*Math.random()),t.t.fillRect(s,i,1,1)}function D(t){let i=p(130,40);for(let s=0;s<40;s+=5)for(let h=0;h<130;h+=5){let e=0===h?0:125===h?10:5,r=0===s?0:35===s?10:5;i.t.drawImage(t,e,r,5,5,h,s,5,5)}return i}const P={e(){P.map={KeyW:z.lt.ot,KeyA:z.lt.at,KeyS:z.lt.ft,KeyD:z.lt.ut,ArrowUp:z.lt.ot,ArrowLeft:z.lt.at,ArrowDown:z.lt.ft,ArrowRight:z.lt.ut,Escape:z.lt.ct},P.Mt=[{x:0,y:0,l:0},{x:0,y:-n,l:1},{x:0,y:n,l:1},{x:0,y:0,l:0},{x:-n,y:0,l:1},{x:-h,y:-h,l:1},{x:-h,y:h,l:1},{x:-n,y:0,l:1},{x:n,y:0,l:1},{x:h,y:-h,l:1},{x:h,y:h,l:1},{x:n,y:0,l:1},{x:0,y:0,l:0},{x:0,y:-n,l:1},{x:0,y:n,l:1},{x:0,y:0,l:0}],P.yt=[],window.addEventListener("keydown",t=>{let i=P.map[t.code];i&&(P.yt[i]=!0)}),window.addEventListener("keyup",t=>{let i=P.map[t.code];i&&(P.yt[i]=!1)}),P.$i()},_i(){let t=(P.yt[z.lt.ot]?1:0)+(P.yt[z.lt.ft]?2:0)+(P.yt[z.lt.at]?4:0)+(P.yt[z.lt.ut]?8:0);P.ts=P.Mt[t]},$i(){P.ts=P.Mt[0];for(let t of Object.values(z.lt))P.yt[t]=!1}},F=(...t)=>I(B(...t)),I=(...t)=>{let i=k.createBufferSource(),s=k.createBuffer(t.length,t[0].length,j);return t.map((t,i)=>s.getChannelData(i).set(t)),i.buffer=s,i.connect(F.wt),i.start(),i},B=(t=1,i=.05,s=220,h=0,e=0,r=.1,l=0,n=1,o=0,f=0,a=0,u=0,c=0,M=0,A=0,y=0,x=0,O=1,w=0,T=0)=>{let E,S,N=2*Math.PI,U=o*=500*N/j**2,d=(0<A?1:-1)*N/4,b=s*=(1+2*i*Math.random()-i)*N/j,H=[],p=0,G=0,L=0,C=1,m=0,K=0,R=0;for(f*=500*N/j**3,A*=N/j,a*=N/j,u*=j,c=j*c|0,S=(h=99+j*h)+(w*=j)+(e*=j)+(r*=j)+(x*=j)|0;L<S;H[L++]=R)++K%(100*y|0)||(R=l?1<l?2<l?3<l?Math.sin((p%N)**3):Math.max(Math.min(Math.tan(p),1),-1):1-(2*p/N%2+2)%2:1-4*Math.abs(Math.round(p/N)-p/N):Math.sin(p),R=(c?1-T+T*Math.sin(2*Math.PI*L/c):1)*(0<R?1:-1)*Math.abs(R)**n*t*v*(L<h?L/h:L<h+w?1-(L-h)/w*(1-O):L<h+w+e?O:L<S-x?(S-L-x)/r*O:0),R=x?R/2+(x>L?0:(L<S-x?1:(S-L)/x)*H[L-x|0]/2):R),E=(s+=o+=f)*Math.sin(G*A-d),p+=E-E*M*(1-1e9*(Math.sin(L)+1)%2),G+=E-E*M*(1-1e9*(Math.sin(L)**2+1)%2),C&&++C>u&&(s+=a,b+=a,C=0),!c||++m%c||(s=b,o=U,C=C||1);return H},v=.3,j=44100,k=new(top.AudioContext||webkitAudioContext);F.wt=k.destination;const V=[[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,],Y={e(){Y.At=!1,Y.t=k,Y.xt=Y.t.createGain(),Y.xt.connect(Y.t.destination),F.wt=Y.xt,Y.dt=[,.01,140,.01,.02,.45,4,2.42,.1,-.1,,,,1.2,,.3,.04,.8,.02],Y.E=[,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01],Y.Tt=[,,68,.01,,.14,1,1.53,7.5,.1,50,.02,-.01,-.2,.1,.2,,.47,.01],Y.pt=[,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9],Y.Ot=[,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13],Y.Et=((t,i,s,h=125)=>{let e,r,l,n,o,f,a,u,c,M,A,y,x,O,w,T,E=[],S=[],N=[],U=0,d=1,b={},H=j/h*60>>2;for(;d;U++)E=[d=u=A=x=0],s.map((h,A)=>{for(a=i[h][U]||[0,0,0],d|=!!i[h][U],w=x+(i[h][0].length-2-!u)*H,r=2,n=x;r<a.length+(A==s.length-1);u=++r){for(o=a[r],c=M!=(a[0]||0)|o|0,l=0;l<H&&u;l++>H-99&&c?y+=(y<1)/99:0)f=(1-y)*E[O++]/2||0,S[n]=(S[n]||0)+f*T-f,N[n]=(N[n++]||0)+f*T+f;o&&(y=o%1,T=a[1]||0,(o|=0)&&(E=b[[M=a[O=0]||0,o]]=b[[M,o]]||(e=[...t[M]],e[2]*=2**((o-12)/12),B(...e))))}x=w});return[S,N]})(...V),localStorage[`OS13kMusic,${t} - Oblique Mystique`]=JSON.stringify(V)},_i(){Y.At&&(Y.bt||(Y.St=I(...Y.Et),Y.St.loop=!0,Y.bt=!0))},is(t){Y.At&&F(...t)},ss(){Y.xt.gain.linearRampToValueAtTime(0,Y.t.currentTime+1)},hs(){Y.xt.gain.linearRampToValueAtTime(1,Y.t.currentTime+1)}},q={e(){this.map=[],this.map[0]=z.lt.Ut,this.map[2]=z.lt.Nt,this.yt=[],window.addEventListener("mousemove",t=>{this.Ht||(this.Ht={}),this.Ht.s=t.clientX*f.width/f.clientWidth|0,this.Ht.h=t.clientY*f.height/f.clientHeight|0}),window.addEventListener("mouseout",()=>{this.Ht=void 0}),window.addEventListener("mousedown",t=>{let i=this.map[t.button];i&&(this.yt[i]=!0),Y.At=!0}),window.addEventListener("mouseup",t=>{let i=this.map[t.button];i&&(this.yt[i]=!1)}),window.addEventListener("click",t=>{t.preventDefault()}),window.addEventListener("contextmenu",t=>{let i=this.map[t.button];i&&(this.yt[i]=!0),this.Gt=2,t.preventDefault()}),q.$i()},_i(){this.Gt&&(this.Gt--,0===this.Gt&&(this.yt[z.lt.Nt]=!1))},$i(){this.Ht=void 0;for(let t of Object.values(z.lt))this.yt[t]=!1}},z={lt:{ot:11,ft:12,at:13,ut:14,Ut:21,Nt:30,ct:96,kt:97,Lt:98},e(){this.ts={x:0,y:0,l:0},this.es={},this.Rt={},this.yt={},this.vt={},P.e(),q.e()},_i(){P._i(),q._i();for(let t of Object.values(z.lt)){let i=q.yt[t]||P.yt[t];this.es[t]=!this.yt[t]&&i,this.Rt[t]=this.yt[t]&&!i,this.es[t]?this.vt[t]=1:this.yt[t]&&i&&this.vt[t]++,this.yt[t]=i}this.Ht=q.Ht,this.ts=P.ts},Pt(t){},Wt(t){}},g=[41,61,[[24,1,5,4,5,3],[13,4,7,3,6,3],[33,5,6,5,7,4],[23,7,5,5,8,2],[11,8,5,4,9,2],[29,11,3,3,10,1],[18,12,4,7,11,3],[35,12,5,5,12,5],[24,13,3,5,13,0],[7,14,3,5,14,0],[11,14,5,5,15,1],[3,16,1,1,1],[23,20,5,5,16,3],[33,20,6,6,17,3],[11,21,4,4,18,2],[18,21,3,3,19,1],[18,26,5,4,20,3],[27,26,5,4,21,0],[10,27,6,4,22,3],[24,31,10,7,23,4],[12,32,9,4,24,5],[10,51,12,9,25,0]],[231,41,29,4,13,1,27,10,1,1,1,28,1,1,1,1,8,41,7,41,17,12,29,30,1,1,26,12,1,1,1,1,17,1,7,3,1,8,1,2,1,1,4,6,1,12,1,1,2,9,1,1,1,1,24,2,1,1,10,1,1,21,4,1,1,23,6,6,5,24,6,11,41,1,1,30,1,6,1,1,40,41,24,12,5,24,12,40,1,41,1,1,75,10,25,6]],J={Ct:t=>t.reduce((t,i)=>(t[i.Dt]=i,t),{}),Kt(t,i){let s=d(t[0].length,t.length,()=>0);for(let h=0;h<s.length;h++)for(let e=0;e<s[0].length;e++)if(t[h][e]){let r=i[t[h][e]];s[h][e]=(t[h-1][e]?0:1)|(t[h][e+1]?0:2)|(t[h+1][e]?0:4)|(t[h][e-1]?0:8),r&&(s[h][e]|=(t[h-1][e]&&h===r.r?16:0)|(t[h][e+1]&&e===r.u+r.w-1?32:0)|(t[h+1][e]&&h===r.r+r.k-1?64:0)|(t[h][e-1]&&e===r.u?128:0))}return s},Ft(){let t=d(g[0],g[1],()=>0),i=g[2].map(t=>({u:t[0],r:t[1],w:t[2],k:t[3],Dt:t[4],rs:t[5]})),s=0;for(let i of g[3])s+=i,t[s/g[0]|0][s%g[0]]=3;for(let s of i)for(let i=0;i<s.k;i++)for(let h=0;h<s.w;h++)t[s.r+i][s.u+h]=s.Dt;let h=this.Ct(i);return{L:t,I:this.Kt(t,h),Vt:h,w:g[0],k:g[1]}}},Q={10:0,32:3,33:3,39:2,44:3,46:3,73:2},X={},Z={e(){Z.gt=m.font._;let t=[[108,m.Y],[114,m.J]];for(let i of t)X[i[0]]=i[1],Q[i[0]]=i[1]._.width+1;Z.qt=$(Z.gt,H(0,0,0,1)),Z.It=$(Z.gt,H(90,20,90,.15)),Z.blue=$(Z.gt,H(200,40,220,1)),Z.Bt=$(Z.gt,H(240,50,200,.2)),Z.tt=$(Z.gt,H(240,240,255,.25)),Z.red=$(Z.gt,H(240,50,50,1))},jt(t,i,s,h,e=1,r=Z.gt,l){for(let n=0;n<i.length;n++){let o=i.charCodeAt(n);if(X[o])t.drawImage(X[o]._,s,h-(X[o]._.height-5)/2);else{let i=4*(o-32);l&&t.drawImage(l,i%180,6*(i/180|0),3,5,s+1,h+1,3*e,5*e),t.drawImage(r,i%180,6*(i/180|0),3,5,s,h,3*e,5*e)}s+=(Q[o]||4)*e}},Yt(t,i,s,h,e,r,l=1,n=Z.gt,o){let f=s,a=h,u=i.split(" ");for(let i of u){for(;"\n"===i[0];)i=i.slice(1),f=s,a+=7*l;let h=Z.Jt(i,l);f+h-s>e&&(f=s,a+=7*l),Z.jt(t,i,f,a,l,n,o),f+=h+(Q[32]||4)}},Jt:(t,i)=>t.split("").reduce((t,i)=>t+(Q[i.charCodeAt(0)]||4),0)*i};function $(t,i){let s=p(t.width,t.height);return s.t.fillStyle=i,s.t.fillRect(0,0,t.width,t.height),s.t.globalCompositeOperation="destination-in",s.t.drawImage(t,0,0),s.n}class _{constructor(t,i,s){this.frames=t,this.zt=i,this.Qt=s,this.Xt=[],this.Zt=[];var h=t/2;for(let t=0;t<h;t++)this.Xt.push(2*Math.random()-1),this.Zt.push(2*Math.random()-1);this.ls=-1}_i(){if(this.ls++,this.ls>=this.frames)return!1;let t=this.ls/2,i=0|t,s=i+1,h=1-this.ls/this.frames;return this.x=this.zt*h*(this.Xt[i]+(t-i)*(this.Xt[s]-this.Xt[i])),this.y=this.Qt*h*(this.Zt[i]+(t-i)*(this.Zt[s]-this.Zt[i])),!0}}class tt{constructor(t,i){this.M={...t},this.angle=i,this._t=l,this.p=-1,this.d=6,this.range=55,Tt.$t.push(new _(6,6,6))}ti(){if(++this.p===this.d&&(this.ii=!0),3===this.p){let t=Tt.ns.filter(t=>t.si&&t!==Tt.K);for(let i of t){let t=u(this.M,i.M);if(t.l>=this.range+i.hi)continue;let s=u(this.M,{x:i.M.x-t.y*i.hi,y:i.M.y+t.x*i.hi}),h=u(this.M,{x:i.M.x+t.y*i.hi,y:i.M.y-t.x*i.hi}),e=[M(s),M(h)];if(!x(e[0],e[1],this.angle-this._t/2,this.angle+this._t/2))continue;let r=[];y(this.M,c(e[0],t.l));for(let i of N(this.M,c(e[0],t.l)))if(!b(i.u,i.r)){r.push(i);break}for(let i of N(this.M,c(e[1],t.l)))if(!b(i.u,i.r)){r.push(i);break}r.length<2&&i.pt.push({ei:100,ri:t,ni:t.l>32?5:10})}}}oi(){}}class it{constructor(t){this.p=-1,this.d=t,this.z=101}ti(){++this.p===this.d&&(this.ii=!0)}oi(){for(let t=0;t<Tt.K.li;t++){let i=t*this.d/Tt.K.li,s=i-3|0;if(this.p===s&&Y.is(Y.Tt),this.p>=s){let s=Math.min(10,10+this.p-i);f.t.globalAlpha=Math.min(1,1+(this.p-i)/10),f.t.drawImage(m.Z._,15+6*t,s),f.t.globalAlpha=1}}}}class st{constructor(t,i,s){this.M={...t},this.angle=i,this.ai=A(c(this.angle,s?8:5)),this.a=h,this.fi=!0,this.f=s,this.ui=!0,this.hi=1,this.r=0,this.p=-1,this.d=0===this.f?45:70}ti(){++this.p===this.d&&(this.ii=!0),this.ai.x*=.9,this.ai.y*=.9,this.a*=.95,this.r+=this.a}oi(){m.rt(m.v[this.f],this.M,this.r)}}st.pt=t=>st.ci(t,8,()=>0),st.Mi=t=>st.ci(t,16,()=>4*Math.random()|0),st.ci=(t,i,s)=>{let e=t.yi?M(t.yi.ri):Math.random()*o;for(let r=0;r<i*(Tt.wi?2:1);r++){let i=Math.random()*t.hi,r=y(t.M,c(Math.random()*o,i));Tt.ns.push(new st(r,e+Math.random()*n-h,s()))}};class ht{constructor(t){this.M={...t},this.p=-1,this.d=40,this.z=101}ti(){++this.p===this.d&&(this.ii=!0)}oi(){let t=["s","t","u","v","w"],i=w(this.M);f.t.globalAlpha=1-this.p/this.d;for(let s=0;s<5;s++){let h=A(c(r*s+this.p/36,12));Z.jt(f.t,t[s],i.s+h.x+2*Math.random()-2,i.h+h.y+2*Math.random()-3,1,Z.blue,Z.Bt)}f.t.globalAlpha=1}}class et{constructor(t,i){this.start=t,this.ei=i,this.p=-1,this.d=20,this.z=101,this.y=5,this.ai=-.7,this.Ai=.09}ti(){++this.p===this.d&&(this.ii=!0),this.y+=this.ai,this.ai+=this.Ai}oi(){let t=this.start-this.ei+8;this.p>15&&(f.t.globalAlpha=1-.1*this.p),f.t.drawImage(m.W[2]._,t,3,this.ei,3,t+2,this.y,this.ei,3),f.t.globalAlpha=1}}class rt{constructor(t){this.M={...t},this.si=200,this.pt=[],this.ai={x:0,y:0},this.xi={x:0,y:-1,l:0},this.hi=8,this.di=.5,this.mi=0,this.os=103,this.Ti=!0,Tt.pi[6]=!0}ti(){let t=this.xi=u(this.M,Tt.K.M);this.Oi=M(this.xi),103===this.os?(t.l<38&&Math.random()<.05&&Tt.ls>this.mi+60&&(this.os=202,this.frames=24),t.l=E(t.l,0,.75),this.ai={x:(this.ai.x+t.x*t.l)/2,y:(this.ai.y+t.y*t.l)/2}):202===this.os?(0==this.frames--&&(this.os=201,this.frames=12),this.ai={x:0,y:0}):201===this.os?(0==this.frames--&&(this.os=103,this.mi=Tt.ls),1===this.frames&&t.l<23&&Tt.K.pt.push({ei:12,ri:t,ni:5}),t.l=E(t.l,0,3),this.ai={x:t.x*t.l,y:t.y*t.l}):106===this.os&&(this.ii=!0,st.Mi(this),Tt.ns.push(new at(this.M,1)),Tt.ns.push(new at(this.M,2)))}oi(){let t=m.g[(Tt.ls/12|0)%2];202===this.os&&(t=m.g[2]),201===this.os&&(t=m.g[3]),m.rt(t,this.M,this.Oi+n)}}class lt{constructor(t){this.M={...t},this.si=100,this.pt=[],this.hi=3,this.di=1,this.ui=!0,this.Ti=!0,Tt.pi[7]=!0;let i=Math.random()*o;i%n<s&&(i+=s),i%n>e&&(i-=s),this.xi=c(i),this.ai=this.xi,this.os=103}ti(){if(103===this.os){let t=a(this.ai);t.l=(t.l+2.5)/2,this.ai=A(t);let i=u(this.M,Tt.K.M);i.l<=this.hi+Tt.K.hi&&Tt.K.pt.push({ei:5,ri:i,ni:3})}else 106===this.os&&(this.ii=!0,st.Mi(this),Tt.ns.push(new at(this.M,1)),Tt.ns.push(new at(this.M,200)))}oi(){m.rt(m.V[0],this.M,Tt.ls/5),m.rt(m.V[1],this.M)}}const nt={Ei(){if(Tt.K.fs>=404&&!Tt.wi){nt.ls=0,Tt.wi=!0,Tt.K.M=G(Tt.L.Vt[25]),Tt.H=!1;let t=Tt.ns.filter(t=>t.Ti);for(let i of t)i.os=106}else if(Tt.wi){nt.ls++,10===nt.ls&&(Tt.ns.push(new ht(Tt.K.M)),Tt.$t.push(new _(20,20,90)));let t=Tt.ns.filter(t=>t.Ti);if(nt.ls%30==0&&t.length<25){let t=y(Tt.K.M,c(Math.random()*o,48)),i=new(0,[rt,rt,lt][3*Math.random()|0])(t);Tt.ns.push(i),Tt.ns.push(new ht(t))}}}},ot={oi(){let t=E(Tt.K.si,0,100);f.t.drawImage(m.W[0]._,2,2),f.t.drawImage(m.W[1]._,0,0,t+8,8,2,2,t+8,8);let i=m.Z;for(let t=0;t<Tt.K.li;t++)t+1>Tt.K.bi&&(i=m.X),f.t.drawImage(i._,15+6*t,10);Z.jt(f.t,"stuvw",f.width-34-60,4,2,Z.blue,Z.Bt);let s=Tt.K.fs;Tt.wi&&(s=nt.ls>180?666:404),(s>0||Tt.K.Si>0)&&(ot.p>0&&ot.p<30?f.t.globalAlpha=1-ot.p++/60:f.t.globalAlpha=.5,f.t.drawImage(m.E[1]._,f.width-47,2),f.t.globalAlpha=1,f.t.drawImage(m.E[0]._,f.width-47,2),Z.jt(f.t,"x"+(""+s).padStart(3,"0"),f.width-34,4,2,666===s?Z.red:Z.blue,Z.Bt)),ot.Ui(),z.Ht&&(Tt.R&&(f.t.globalAlpha=.5),m.rt(m.P[0],T(z.Ht),Tt.ls/72),f.t.globalAlpha=1)},Ni(){ot.p=1},Ui(){let t=ot.Hi();if(t){let i=u(Tt.K.M,t.M),s=M(i);if(i.l=E(i.l/2,16,f.height/2-5),i.l>64){let t=y(Tt.K.M,i);f.t.globalAlpha=.2*Math.sin(Tt.ls/20)+.8,m.rt(m.E[2],t,s+n),f.t.globalAlpha=1}}},Hi(){let t=Tt.ns.filter(t=>t.E),i=Tt.K.M;return t.sort((t,s)=>(t.M.x-i.x)**2+(t.M.y-i.y)**2-((s.M.x-i.x)**2+(s.M.y-i.y)**2)),t[0]}};class ft{constructor(t,i){this.p=-1,this.d=40,this.z=101,this.a=m.nt(m.E[0],t),this.a.s-=m.E[0].mt.x,this.a.h-=m.E[0].mt.y,this.b={s:f.width-47,h:2},this.ei=i}ti(){10===this.p&&Y.is(Y.E),this.p%8==0&&(Tt.K.si=E(Tt.K.si+1,0,100)),++this.p===this.d&&(this.ii=!0,Tt.K.fs+=this.ei,ot.Ni())}oi(){let t={s:(this.b.s-this.a.s)*this.p/this.d+this.a.s,h:(this.b.h-this.a.h)*this.p/this.d+this.a.h};f.t.drawImage(m.E[0]._,t.s,t.h)}}class at{constructor(t,i){this.M={...t},this.ei=i,this.angle=Math.random()*o,this.ai=A(c(this.angle,3*Math.random()+1)),this.Gi=60*Math.random()|0,this.hi=3,this.fi=!0,this.E=!0,Tt.wi&&(this.ii=!0)}ti(){this.ai.x*=.95,this.ai.y*=.95,u(this.M,Tt.K.M).l<Tt.K.hi+this.hi+2&&106!==Tt.K.os&&107!==Tt.K.os&&(this.ii=!0,Tt.ns.push(new ft(this.M,this.ei)))}oi(){let t={x:this.M.x,y:this.M.y+2*Math.sin((Tt.ls+this.Gi)/30)};m.rt(m.E[1],t),m.rt(m.E[0],t)}}class ut{constructor(){this.M=G(Tt.L.Vt[1]),this.ai={x:0,y:0},this.si=100,this.pt=[],this.as=[],this.xi={x:0,y:-1,l:0},this.hi=11,this.bi=4,this.li=4,this.ki=!1,this.di=3,this.fs=0,this.Si=0,this.os=107,this.frames=29}ti(){if(this.as.unshift({...this.M}),this.as.splice(50),104===this.os)Tt.R&&Tt.R.Li?this.ai={x:0,y:0}:this.Ri(1),Tt.R&&Tt.R.vi||z.es[z.lt.Ut]&&(0===this.bi?this.us():this.Pi()),Tt.R&&Tt.R.Wi||z.es[z.lt.Nt]&&this.bi<this.li&&this.us(),this.si<75&&(Tt.pi[8]=!0),this.Si>0&&(Tt.pi[5]=!0);else if(201===this.os)this.Ri(1),--this.frames<=0&&(0===this.bi?this.us(!0):this.os=104);else if(202===this.os)this.Ri(this.ki?.5:2),--this.frames<=0&&(this.bi=this.li,this.os=104);else if(106===this.os){if(Tt.wi){this.os=104,Tt.$t.push(new _(15,15,25));let t=Tt.ns.filter(t=>t.Ti);for(let i of t)Math.random()<.5&&(i.os=106)}else this.os=107,this.frames=120,this.Ci();this.si=100,this.Si++,st.Mi(this),st.Mi(this)}else if(107===this.os){if(Tt.Di&&this.frames--,30===this.frames&&(this.M=G(Tt.L.Vt[1]),this.ai={x:0,y:0},Tt.H)){for(let t of Tt.H.Ki)t.ii=!0;Tt.H=!1}0===this.frames&&(this.os=104,Tt.ns.push(new ht(this.M)),Tt.pi[0]=Tt.pi[1]=Tt.pi[2]=Tt.pi[3]=Tt.pi[4]=!0)}}Ri(t){z.Ht&&(this.xi=u(this.M,T(z.Ht)),this.Oi=M(this.xi)-i);let s=z.ts.x*z.ts.l*1.7*t,h=z.ts.y*z.ts.l*1.7*t;this.ai.x=(this.ai.x+s)/2,this.ai.y=(this.ai.y+h)/2}Pi(){Y.is(Y.dt),this.os=201,this.frames=10,this.bi--;let t={x:this.M.x+8*this.xi.x-3*this.xi.y,y:this.M.y+8*this.xi.y+3*this.xi.x};Tt.ns.push(new tt(t,this.Oi)),this.ai=A({...a(this.xi),l:-1})}us(t){this.ki=t,this.os=202,this.frames=20,this.bi=0,Tt.ns.push(new it(this.frames))}oi(){if(106===this.os||107===this.os)return;let t,i=m.K[0],s=(Tt.ls/30|0)%2;201===this.os&&this.frames>=2&&(i=m.K[1],t=m.F[6-this.frames]);let h=202!==this.os||this.ki?0:15;for(let e=Math.min(h,history.length);e>=0;e--){let{s:h,h:r}=m.nt(i,this.as[e]);f.t.save(),f.t.globalAlpha=0===e?1:.5,f.t.translate(h+i.mt.x,r+i.mt.y),f.t.rotate(this.Oi+n),t&&f.t.drawImage(m.K[0]._,12,0,9,32,12-i.mt.x,2-i.mt.y,9,32),f.t.drawImage(i._,-i.mt.x,-i.mt.y),f.t.drawImage(m.K[2]._,-i.mt.x,-i.mt.y+s),t&&(201===this.os&&this.frames>=2&&(i=m.K[1],t=m.F[6-this.frames]),f.t.drawImage(t._,3-t.mt.x,-20-t.mt.y)),f.t.restore()}}Ci(){let t=Math.min(this.fs,7),i=this.fs/t|0,s=this.fs-i*t;for(let h=0;h<t;h++)Tt.ns.push(new at(this.M,i+s)),s=0;this.fs=0}}const ct=[[[rt,1,1,1,1,1]],[[lt,1,1,1,1,1]],[[rt,5,,,,1,1,1],[lt,,,,,3,,3]],[[rt,,1,,1,,1],[lt,2,,2,,2,,3]],[[rt,20,,,,,,,],[lt,,,,,1,1,1,1]],[[rt,,,,,,,6],[lt,3,,3,,3,,,3]]],Mt={Ei(){if(Tt.H){let t=Tt.H.Ki.filter(t=>!t.ii).length;if(0===Tt.H.Fi.length)0===t&&(Tt.Vi[Tt.H.G.Dt]=!0,Tt.H=!1);else{let i=Tt.H.Fi[0];Tt.ls>=Tt.H.start+i[1]?Mt.gi(i)&&Tt.H.Fi.shift():0===t&&(i[1]-=6)}}else{let i={u:(t=Tt.K.M).x/32|0,r:t.y/32|0},s=Tt.L.Vt[Tt.L.L[i.r][i.u]];s&&s.Dt>=5&&!Tt.Vi[s.Dt]&&!Tt.wi&&i.u>s.u&&i.r>s.r&&i.u<s.u+s.w-1&&i.r<s.r+s.k-1&&(Tt.$t.push(new _(20,20,20)),Tt.H={G:s,Ki:[],start:Tt.ls,Fi:Mt.qi(ct[s.rs])},Y.is(Y.Ot))}var t},qi(t){let i=[];for(let s of t){let t=s[0];for(let h=1;h<s.length;h++)for(let e=0;e<s[h];e++)i.push([t,30*(h-1)+10*e])}return i.sort((t,i)=>t[1]-i[1]),i},gi(t){let i={x:(Math.random()*(32*Tt.H.G.w-32)|0)+32*Tt.H.G.u+16,y:(Math.random()*(32*Tt.H.G.k-32)|0)+32*Tt.H.G.r+16};if(u(Tt.K.M,i).l>48){let s=new t[0](i);return Tt.ns.push(s),Tt.H.Ki.push(s),Tt.ns.push(new ht(i)),s}}},At={Ei(t){let i=t.filter(t=>t.M&&t.ai&&!t.ii);for(let t=0;t<5;t++){for(let t=0;t<i.length-1;t++)for(let s=t+1;s<i.length;s++)At.Ii(i[t],i[s]);for(let t of i)At.Bi(t)}for(let t of i)t.M.x+=t.ai.x,t.M.y+=t.ai.y},Ii(t,i){if(t.fi||i.fi)return;let s=function(t,i,s,h,e,r){[s,r]=[A(s),A(r)];let l=u({x:t.x+s.x,y:t.y+s.y},{x:h.x+r.x,y:h.y+r.y});if(l.l<i+e)return{O:l.x,S:l.y,l:i+e-l.l}}(t.M,t.hi,t.ai,i.M,i.hi,i.ai);if(s)if(t.ui&&i.ui)t.ai.x=-s.O*s.l,t.ai.y=-s.S*s.l,i.ai.x=s.O*s.l,i.ai.y=s.S*s.l;else{let h=a(t.ai).l+i.di,e=a(i.ai).l+t.di,r=t.ui?.1:1,l=i.ui?.1:1;t.ai.x-=s.O*s.l*r*h/(h+e),t.ai.y-=s.S*s.l*r*h/(h+e),i.ai.x+=s.O*s.l*l*e/(h+e),i.ai.y+=s.S*s.l*l*e/(h+e)}},Bi(t){if(!t.ji)for(let i of function*(t,i,s){yield*function*(t,i,s){let h=[{x:Math.min(t.x,i.x)-s,y:Math.min(t.y,i.y)-s},{x:Math.max(t.x,i.x)+s,y:Math.max(t.y,i.y)+s}];yield*function*(t){for(let i=t[0].y/32|0;32*i<t[1].y;i++)for(let s=t[0].x/32|0;32*s<t[1].x;s++)yield{u:s,r:i}}(h)}(t,{x:t.x+i.x,y:t.y+i.y},s)}(t.M,t.ai,t.hi))if(!b(i.u,i.r)){let s=[O(i),O({u:i.u+1,r:i.r+1})],h=U(t.M,{x:t.M.x+t.ai.x,y:t.M.y+t.ai.y},t.hi,s);h&&(t.ui?0===h.O?t.ai.y=-t.ai.y:0===h.S?t.ai.x=-t.ai.x:(t.ai.x+=h.O,t.ai.y+=h.S):0===h.O?t.ai.y=h.y-t.M.y:0===h.S?t.ai.x=h.x-t.M.x:(t.ai.x+=h.O,t.ai.y+=h.S))}}},yt={Ei(t){let i=!1;for(let s of t)if(s.si){if(s.pt.length>0){if(106!==s.os&&107!==s.os)for(let t of s.pt)s===Tt.K&&Tt.ns.push(new et(s.si,t.ei)),s.si-=t.ei,t.ri.l=t.ni,s.ai=y(s.ai,t.ri),s.yi=t,st.pt(s),i=!0;s.pt=[]}s.si<=0&&106!==s.os&&(s.os=106)}i&&Y.is(Y.pt)}};class xt{constructor(t){let i=xt.Yi[t];this.Ji=t,this.cs=i.cs,this.zi=i.zi,this.Wi=i.Wi,this.vi=i.vi,this.zi&&(this.Li=this.vi=this.Wi=!0),this.p=0,this.d=this.zi?100:40,this.z=102,Tt.R=this}ti(){this.p<this.d&&this.p++,Tt.Qi[this.Ji]=!0,2===this.Ji?z.ts.l>0&&(this.ii=!0,Tt.R=!1):4===this.Ji?z.es[z.lt.Nt]&&(this.ii=!0,Tt.R=!1):z.es[z.lt.Ut]&&(this.p<this.d?this.p=this.d:(this.ii=!0,Tt.R=!1))}oi(){let t=m.st,i=f.i.s+5,s=f.i.h+8,h=i+8,e=s+12;this.zi||(t=m.ht,i=f.i.s-m.ht._.width/2,s=f.height-m.ht._.height-8,h=i+5,e=s+5),f.t.drawImage(t._,i,s),Z.Yt(f.t,L(this.cs,this.p,this.d),h,e,115,50,1,Z.qt,Z.It)}}xt.Yi=[{cs:"SHOGGOTH'S ARMPIT! THE SHOTGUN ARCANA IS SCATTERED ALL OVER THIS DUNGEON!",zi:!0},{cs:"HELP ME FIND ALL 404 MISSING PAGES AND GET ME OUT OF HERE!",zi:!0},{cs:"USE WASD OR mnop TO MOVE",vi:!0,Wi:!0},{cs:"USE l TO FIRE YOUR SHOTGUN",Wi:!0},{cs:"USE r TO RELOAD",vi:!0},{cs:"BE CAREFUL OUT THERE, WE NEED THOSE PAGES BACK!",zi:!0},{cs:"STABGUTS! LOOK OUT FOR THE POINTY END.",zi:!0},{cs:"SPINDOCTORS! YOU'LL GET MORE THAN A HAIRCUT FROM THOSE THINGS.",zi:!0},{cs:"DON'T FORGET, PICK UP LOST PAGES TO RECOVER SOME HEALTH!",zi:!0}];const Ot={Ei(){if(!Tt.R&&!Tt.H&&!Tt.wi)for(let t=0;t<xt.Yi.length;t++)if(Tt.pi[t]&&!Tt.Qi[t])return void Tt.ns.push(new xt(t))}},wt={oi(){let t=f.t,i=Tt.L,s=f.i.s-Tt.A.M.x,h=f.i.h-Tt.A.M.y,e=0,r=i.k,l=0,n=i.w;Tt.H?(e=Tt.H.G.r,r=e+Tt.H.G.k,l=Tt.H.G.u,n=l+Tt.H.G.w,f.t.fillStyle=H(10,10,10,1),f.o()):f.t.drawImage(m.$._,-16-Tt.A.M.x%32,-8-Tt.A.M.y%32);for(let o=e;o<r;o++)for(let e=l;e<n;e++){let r=32*e+s,l=32*o+h;if(r<-50||l<-50||r>500||l>500)continue;let n=m.q[i.L[o][e]?1:0];t.drawImage(n._,r,l)}for(let o=e;o<r;o++)for(let e=l;e<n;e++){let r=32*e+s,l=32*o+h;if(r<-50||l<-50||r>500||l>500)continue;let n=[[0,0,36,4,r-2,l-2,36,4],[32,0,4,36,r+30,l-2,4,36],[0,32,36,4,r-2,l+30,36,4],[0,0,4,36,r-2,l-2,4,36]];for(let s=0;s<4;s++)i.I[o][e]&1<<s&&t.drawImage(m.I._,...n[s]);if(Tt.H)for(let s=0;s<4;s++)i.I[o][e]&16<<s&&t.drawImage(m.it._,...n[s])}if(!Tt.H)for(let t of Object.values(i.Vt))if(t.Dt>=3&&!Tt.Vi[t.Dt]){let i=w({x:32*(t.u+t.w/2),y:32*(t.r+t.k/2)});f.t.globalAlpha=1-Tt.ls%30/30,Z.jt(f.t,"!",i.s-4,i.h-10,4,Z.red,Z.Bt),f.t.globalAlpha=1}}},Tt=new class{e(){m.j(()=>{f.e(),m.e(),Z.e(),z.e(),Y.e(),this.L=J.Ft(),this.ns=[],this.pi={},this.Qi={},this.Vi={},this.Xi=0,this.$t=[],this.K=new ut,this.ns.push(this.K),this.A={M:{...this.K.M}},window.addEventListener("blur",()=>this.ss()),window.addEventListener("focus",()=>this.hs()),this.start()})}start(){this.ls=0,this._i(),window.requestAnimationFrame(()=>this.Zi(1))}Zi(t){this.ls++,f.c(),this._i(),this.oi(f.t),window.requestAnimationFrame(()=>this.Zi(t))}_i(){if(z._i(),this.Ms)return;Y._i();for(let t of Tt.ns)t.ti&&t.ti();yt.Ei(this.ns),At.Ei(this.ns),Ot.Ei(),Mt.Ei(),nt.Ei(),this.ns=this.ns.filter(t=>!t.ii);let t=this.K.M.x-this.A.M.x,i=this.K.M.y-this.A.M.y;this.A.M.x+=.2*t,this.A.M.y+=.2*i,this.$t=this.$t.filter(t=>t._i()),Tt.ls%6==0&&(this.Xi=10*Math.random()|0),30===Tt.ls&&Tt.$t.push(new _(20,20,20)),z.es[z.lt.Ut]&&!Tt.Di&&(Tt.Di=!0)}oi(){f.t.setTransform(1,0,0,1,0,0),f.t.scale(f.scale,f.scale);let i=0,s=0;this.$t.forEach(t=>{i+=t.x,s+=t.y}),f.t.translate(i,s),wt.oi();for(let t of this.ns)(!t.z||t.z<100)&&t.oi();f.t.drawImage(m.tt._,0,0,500,500,-this.Xi,-this.Xi,f.width+2*this.Xi,f.height+2*this.Xi),ot.oi();for(let t of this.ns)t.z&&t.z>100&&t.oi();if(Tt.ls<120&&(f.t.fillStyle=H(0,0,0,1-Tt.ls/120),f.o()),Tt.ls>=30&&!Tt.Di){let i=Z.Jt(t,3);Z.jt(f.t,t,(f.width-i)/2,f.height/2,3,Z.gt,Z.red)}if(Tt.wi){f.t.fillStyle=H(240,0,0,E(nt.ls/1800,0,.7)),f.o();let t="WAIT! THE PORTAL HOME... \n \nIT STINKS LIKE ROTTEN MEAT, BUT IT LOOKS LIKE YOU ARE STUCK IN THE DUNGEONS.";Z.Yt(f.t,L(t,nt.ls,600),40,40,f.width-80,f.t.height-80,2,Z.gt,Z.red)}}ss(){this.Ms||(this.Ms=!0,Y.ss())}hs(){this.Ms&&(this.Ms=!1,Y.hs())}};Tt.e()}();</script>