<style>body,html{margin:0;padding:0;background-color:#000}div{position:absolute;top:0;bottom:0;left:0;right:0}#canvas{width:100%;height:100%}</style><div><canvas id="canvas"></canvas></div><script>!function(){"use strict";const t=6*Math.PI/180,i=20*Math.PI/180,s=45*Math.PI/180,h=70*Math.PI/180,e=72*Math.PI/180,r=80*Math.PI/180,l=90*Math.PI/180,n=360*Math.PI/180,o={init(){o.e=document.getElementById("canvas"),o.t=o.e.getContext("2d"),o.n(!0)},n(t){let i=window.devicePixelRatio,s=o.e.clientWidth,h=o.e.clientHeight,e=s*i,r=h*i;(t||o.e.width!==e||o.e.height!==r)&&(o.e.width=e,o.e.height=r,o.scale=(10*Math.max(e/480,r/270)|0)/10,o.width=Math.ceil(e/o.scale),o.height=Math.ceil(r/o.scale),o.i={s:o.width/2|0,h:o.height/2|0},o.clientWidth=s,o.clientHeight=h,o.t.imageSmoothingEnabled=!1),o.e.style.cursor="none"},o(){o.t.fillRect(0,0,o.width,o.height)}};function f(t){let i=Math.sqrt(t.x*t.x+t.y*t.y);return 0===i?{x:0,y:0,l:0}:{x:t.x/i,y:t.y/i,l:i}}function a(t,i){return f({x:i.x-t.x,y:i.y-t.y})}function u(t,i){return{x:Math.cos(t),y:Math.sin(t),l:i||1}}function c(t){let i=Math.atan2(t.y,t.x);return i<0&&(i+=n),i}function M(t){return{x:t.x*(t.l||1),y:t.y*(t.l||1)}}function A(...t){let i={x:0,y:0,l:1};for(let s of t)i.x+=s.x*(s.l||1),i.y+=s.y*(s.l||1);return i}function y(t,i,s,h){for(t>i&&([t,i]=[i,t]),s>h&&([s,h]=[h,s]);h>=i+n;)h-=n,s-=n;for(;s<=t-n;)s+=n,h+=n;const e=[Math.max(t,s),Math.min(i,h)];return e[0]>e[1]?void 0:e}function x(t){return{x:32*t.u,y:32*t.r}}function T(t){return{s:t.x+o.i.s-Et.A.M.x,h:t.y+o.i.h-Et.A.M.y}}function w(t){return{x:t.s-o.i.s+Et.A.M.x,y:t.h-o.i.h+Et.A.M.y}}function E(t,i,s){return t<i?i:t>s?s:t}function O(t,i){let s,h,e=i-t;return 0===e?(h=NaN,s=1/0):e>0?(h=1/e,s=(1-(t-(0|t)))*h):(h=-1/e,s=(t-(0|t))*h),{m:s,T:h}}function*d(t,i){yield*function*(t,i){let s=t.x/32,h=t.y/32,e=i.x/32,r=i.y/32,l=Math.abs((0|s)-(0|e))+Math.abs((0|h)-(0|r));if(yield{u:0|s,r:0|h,l:0},l>1){let t=s,i=h,n=0,o=Math.sign(e-s),f=Math.sign(r-h),a=O(s,e),u=O(h,r);for(let s=0;s<l-1;s++)a.m<u.m?(t+=o,n+=o,a.m+=a.T):(i+=f,n+=f,u.m+=u.T),yield{u:0|t,r:0|i,l:n}}l>0&&(yield{u:0|e,r:0|r,l:1})}(t,A(t,i))}function U(t,i,s,h){if(Math.max(t.x,i.x)+s<h[0].x||Math.min(t.x,i.x)-s>h[1].x||Math.max(t.y,i.y)+s<h[0].y||Math.min(t.y,i.y)-s>h[1].y)return;let e=i.x-t.x,r=i.y-t.y,l=0===e?0:1/e,n=0===r?0:1/r,o=1/0,f=1/0;if(t.x-s<h[0].x&&i.x+s>h[0].x){let i=(h[0].x-s-t.x)*l;if(i>=0&&i<=1){let s=r*i+t.y;if(s>=h[0].y&&s<=h[1].y)return{x:e*i+t.x,y:s,p:i,O:-1,U:0,S:h[0].x,H:s}}o=h[0].x}if(t.x+s>h[1].x&&i.x-s<h[1].x){let n=(t.x-(h[1].x+s))*-l;if(n>=0&&n<=1){let s=r*n+i.y;if(s>=h[0].y&&s<=h[1].y)return{x:e*n+t.x,y:s,p:n,O:1,U:0,S:h[1].x,H:s}}o=h[1].x}if(t.y-s<h[0].y&&i.y+s>h[0].y){let i=(h[0].y-s-t.y)*n;if(i>=0&&i<=1){let s=e*i+t.x;if(s>=h[0].x&&s<=h[1].x)return{x:s,y:r*i+t.y,p:i,O:0,U:-1,S:s,H:h[0].y}}f=h[0].y}if(t.y+s>h[1].y&&i.y-s<h[1].y){let i=(t.y-(h[1].y+s))*-n;if(i>=0&&i<=1){let s=e*i+t.x;if(s>=h[0].x&&s<=h[1].x)return{x:s,y:r*i+t.y,p:i,O:0,U:1,S:s,H:h[0].y}}f=h[1].y}if(o===1/0&&f===1/0)return;o!==1/0&&f===1/0&&(f=r>0?h[1].y:h[0].y),f!==1/0&&o===1/0&&(o=e>0?h[1].x:h[0].x);let a=1/s,u=Math.sqrt(e*e+r*r),c=o-t.x,M=f-t.y,A=Math.sqrt(c*c+M*M),y=Math.acos((c*e+M*r)/(u*A));if(A<s)return;if(0===y){let i=(A-s)/u;if(i>1||i<0)return;let h=i*e+t.x,l=i*r+t.y,n=c/A,a=M/A;return isNaN(h)?void 0:{x:h,y:l,p:i,O:n,U:a,S:o,H:f}}let x=Math.sin(y),T=x*A*a;if(Math.abs(T)>1)return;let w=Math.PI-Math.asin(T),E=Math.PI-y-w,O=s*Math.sin(E)/x/u;if(O>1||O<0)return;let d=O*e+t.x,U=O*r+i.y,H=(d-o)*a,S=(U-f)*a;return isNaN(d)?void 0:{x:d,y:U,p:O,O:H,U:S,S:o,H:f}}function H(t,i,s){return Array.from({length:i},()=>Array.from({length:t},s))}function S(t,i){if(Et.N){let s=Et.N.L;if(t<s.u||i<s.r||t>=s.u+s.w||i>=s.r+s.k)return!1}return!(t<0||i<0||t>=Et.R.w||i>=Et.R.k||!Et.R.R[i][t])}function p(t,i,s,h){return`rgba(${t},${i},${s},${h})`}function N(t,i){let s=document.createElement("canvas");s.width=t,s.height=i;let h=s.getContext("2d");return{e:s,t:h}}function L(t){return{x:32*(t.u+t.w/2),y:32*(t.r+t.k/2)}}function b(t,i,s){let h=E(Math.ceil(i/s*t.length),0,t.length),e=t.slice(0,h),r=t.indexOf(" ",h-1);return r<0&&(r=t.length),r-h>0&&(e+="#".repeat(r-h)),e}const D={D:[[0,0,15,15],[15,0,15,15],[30,0,15,15]],font:[[0,15,180,12]],g:[[0,27,5,5],[5,27,5,5],[10,27,5,5],[15,27,5,5]],K:[[0,32,9,9]],G:[[0,41,109,9],[109,41,109,9]],V:[[0,50,6,7],[6,50,6,7]],W:[[0,57,7,9],[7,57,7,9]],c:[[0,66,12,14],[12,66,12,14],[24,66,12,14]],I:[[0,80,21,32],[21,80,21,32],[42,80,21,32]],v:[[0,112,23,18],[23,112,23,18],[46,112,23,18],[69,112,23,18]],P:[[0,130,17,17],[17,130,17,17]],j:[[0,147,14,22],[14,147,14,22],[28,147,14,22],[42,147,14,22]],Z:[[0,169,32,32]],q:[[0,201,4,4],[4,201,4,4]],C:"data:image/png;base64,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"},R={B(t){let i=new Image;i.onload=t,i.src=D.C,R.E=i},init(){R.font=m(D.font[0]),R.F=m(D.W[0]),R.Y=m(D.W[1]),R.I=D.I.map(t=>m(t,{x:10,y:21})),R.v=D.v.map(t=>m(t,{x:11,y:14})),R.j=D.j.map(m),R.P=D.P.map(m),R.g=D.g.map(m),R.J=m(D.V[0]),R.X=m(D.V[1]),R.G=D.G.map(m),R.G.push(K(function(t){let i=N(t.width,t.height);return i.t.drawImage(t,0,0),i.t.globalCompositeOperation="source-atop",i.t.fillStyle=p(255,255,0,.6),i.t.fillRect(0,0,t.width,t.height),i.e}(R.G[1]._))),R.K=D.K.map(m),R.c=D.c.map(m),R.Z=D.Z.map(m),R.Z[1]=K(function(t){let i=N(32,32);return i.t.fillStyle=p(48,0,0,1),i.t.fillRect(0,0,32,32),i.t.globalAlpha=.6,i.t.globalCompositeOperation="hard-light",i.t.drawImage(t,0,0),I(i),i.e}(R.Z[0]._)),R.$=K(function(t){let i=N(544,334);for(let s=0;s<334;s+=32)for(let h=0;h<544;h+=32)i.t.drawImage(t,h,s);return i.e}(R.Z[0]._)),R.tt=K(function(){let t=N(500,500),i=t.t.createRadialGradient(250,250,0,250,250,250);return i.addColorStop(.3,p(0,0,0,0)),i.addColorStop(1,p(0,0,0,.9)),t.t.fillStyle=i,t.t.fillRect(0,0,500,500),t.e}());let t=D.q.map(m);R.q=K(function(t){let i=N(36,36);for(let s=0;s<36;s+=4)i.t.drawImage(t,s,0),i.t.drawImage(t,s,32),i.t.drawImage(t,0,s),i.t.drawImage(t,32,s);return I(i),i.e}(t[0]._)),R.it=K(function(t,i){let s=N(36,36);for(let t=0;t<36;t+=4)s.t.drawImage(i,t,0),s.t.drawImage(i,t,32),s.t.drawImage(i,0,t),s.t.drawImage(i,32,t);return s.t.drawImage(t,0,0),s.t.drawImage(t,32,0),s.t.drawImage(t,0,32),s.t.drawImage(t,32,32),I(s),s.e}(t[0]._,t[1]._));let i=D.D.map(m);R.st=K(function(t,i){let s=N(130,45);return s.t.drawImage(G(t).e,0,5),s.t.drawImage(i,5,0),s.e}(i[0]._,i[2]._)),R.ht=K(G(i[1]._).e)},et(t,i,s,h){t.drawImage(i._,s-i.Q.x,h-i.Q.y)},rt(t,i,s){let{s:h,h:e}=this.nt(t,i);s?(o.t.save(),o.t.translate(h+t.Q.x,e+t.Q.y),o.t.rotate(s),o.t.drawImage(t._,-t.Q.x,-t.Q.y),o.t.restore()):o.t.drawImage(t._,h,e)},nt:(t,i)=>({s:i.x-t.Q.x-Et.A.M.x+o.i.s,h:i.y-t.Q.y-Et.A.M.y+o.i.h})};function m(t,i){return K(function(t,i,s,h){const e=R.E,r=N(s,h);return r.t.drawImage(e,t,i,s,h,0,0,s,h),r.e}(...t),i)}function K(t,i){let s=t.width,h=t.height;return{_:t,Q:i&&i.x?i:{x:s/2|0,y:h/2|0}}}function I(t){t.t.globalCompositeOperation="source-atop";for(let i=0;i<36;i++)for(let s=0;s<36;s++)t.t.fillStyle=p(0,0,0,.6*Math.random()),t.t.fillRect(s,i,1,1)}function G(t){let i=N(130,40);for(let s=0;s<40;s+=5)for(let h=0;h<130;h+=5){let e=0===h?0:125===h?10:5,r=0===s?0:35===s?10:5;i.t.drawImage(t,e,r,5,5,h,s,5,5)}return i}const W=.7071067811865475,V={init(){V.map={KeyW:v.lt.ot,KeyA:v.lt.at,KeyS:v.lt.ft,KeyD:v.lt.ut,ArrowUp:v.lt.ot,ArrowLeft:v.lt.at,ArrowDown:v.lt.ft,ArrowRight:v.lt.ut,Escape:v.lt.ct},V.yt=[{x:0,y:0,l:0},{x:0,y:-1,l:1},{x:0,y:1,l:1},{x:0,y:0,l:0},{x:-1,y:0,l:1},{x:-W,y:-W,l:1},{x:-W,y:W,l:1},{x:-1,y:0,l:1},{x:1,y:0,l:1},{x:W,y:-W,l:1},{x:W,y:W,l:1},{x:1,y:0,l:1},{x:0,y:0,l:0},{x:0,y:-1,l:1},{x:0,y:1,l:1},{x:0,y:0,l:0}],V.Mt=[],window.addEventListener("keydown",t=>{let i=V.map[t.code];i&&(V.Mt[i]=!0)}),window.addEventListener("keyup",t=>{let i=V.map[t.code];i&&(V.Mt[i]=!1)}),V.mt()},$i(){let t=(V.Mt[v.lt.ot]?1:0)+(V.Mt[v.lt.ft]?2:0)+(V.Mt[v.lt.at]?4:0)+(V.Mt[v.lt.ut]?8:0);V.ts=V.yt[t]},mt(){V.ts=V.yt[0];for(let t of Object.values(v.lt))V.Mt[t]=!1}},j=(...t)=>Z(g(...t)),Z=(...t)=>{let i=B.createBufferSource(),s=B.createBuffer(t.length,t[0].length,P);return t.map((t,i)=>s.getChannelData(i).set(t)),i.buffer=s,i.connect(j.At),i.start(),i},g=(t=1,i=.05,s=220,h=0,e=0,r=.1,l=0,n=1,o=0,f=0,a=0,u=0,c=0,M=0,A=0,y=0,x=0,T=1,w=0,E=0)=>{let O,d,U=2*Math.PI,H=o*=500*U/P**2,S=(0<A?1:-1)*U/4,p=s*=(1+2*i*Math.random()-i)*U/P,N=[],L=0,b=0,D=0,R=1,m=0,K=0,I=0;for(f*=500*U/P**3,A*=U/P,a*=U/P,u*=P,c=P*c|0,d=(h=99+P*h)+(w*=P)+(e*=P)+(r*=P)+(x*=P)|0;D<d;N[D++]=I)++K%(100*y|0)||(I=l?1<l?2<l?3<l?Math.sin((L%U)**3):Math.max(Math.min(Math.tan(L),1),-1):1-(2*L/U%2+2)%2:1-4*Math.abs(Math.round(L/U)-L/U):Math.sin(L),I=(c?1-E+E*Math.sin(2*Math.PI*D/c):1)*(0<I?1:-1)*Math.abs(I)**n*t*k*(D<h?D/h:D<h+w?1-(D-h)/w*(1-T):D<h+w+e?T:D<d-x?(d-D-x)/r*T:0),I=x?I/2+(x>D?0:(D<d-x?1:(d-D)/x)*N[D-x|0]/2):I),O=(s+=o+=f)*Math.sin(b*A-S),L+=O-O*M*(1-1e9*(Math.sin(D)+1)%2),b+=O-O*M*(1-1e9*(Math.sin(D)**2+1)%2),R&&++R>u&&(s+=a,p+=a,R=0),!c||++m%c||(s=p,o=H,R=R||1);return N},k=.3,P=44100,B=new(top.AudioContext||webkitAudioContext);j.At=B.destination;const C=[[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,{}],Y={init(){Y.wt=!1,Y.t=B,Y.xt=Y.t.createGain(),Y.xt.connect(Y.t.destination),j.At=Y.xt,Y.dt=[,.01,140,.01,.02,.45,4,2.42,.1,-.1,,,,1.2,,.3,.04,.8,.02],Y.c=[,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01],Y.Tt=[,,68,.01,,.14,1,1.53,7.5,.1,50,.02,-.01,-.2,.1,.2,,.47,.01],Y.Et=[,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9],Y.pt=[,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13],Y.Ot=((t,i,s,h=125)=>{let e,r,l,n,o,f,a,u,c,M,A,y,x,T,w,E,O=[],d=[],U=[],H=0,S=1,p={},N=P/h*60>>2;for(;S;H++)O=[S=u=A=x=0],s.map((h,A)=>{for(a=i[h][H]||[0,0,0],S|=!!i[h][H],w=x+(i[h][0].length-2-!u)*N,r=2,n=x;r<a.length+(A==s.length-1);u=++r){for(o=a[r],c=M!=(a[0]||0)|o|0,l=0;l<N&&u;l++>N-99&&c?y+=(y<1)/99:0)f=(1-y)*O[T++]/2||0,d[n]=(d[n]||0)+f*E-f,U[n]=(U[n++]||0)+f*E+f;o&&(y=o%1,E=a[1]||0,(o|=0)&&(O=p[[M=a[T=0]||0,o]]=p[[M,o]]||(e=[...t[M]],e[2]*=2**((o-12)/12),g(...e))))}x=w});return[d,U]})(...C)},$i(){Y.wt&&(Y.Ut||(Y.St=Z(...Y.Ot),Y.St.loop=!0,Y.Ut=!0))},play(t){Y.wt&&j(...t)},is(){Y.xt.gain.linearRampToValueAtTime(0,Y.t.currentTime+1)},ss(){Y.xt.gain.linearRampToValueAtTime(1,Y.t.currentTime+1)}},z={init(){this.map=[],this.map[0]=v.lt.bt,this.map[2]=v.lt.Ht,this.Mt=[],window.addEventListener("mousemove",t=>{this.Nt||(this.Nt={}),this.Nt.s=t.clientX*o.width/o.clientWidth|0,this.Nt.h=t.clientY*o.height/o.clientHeight|0}),window.addEventListener("mouseout",()=>{this.Nt=void 0}),window.addEventListener("mousedown",t=>{let i=this.map[t.button];i&&(this.Mt[i]=!0),Y.wt=!0}),window.addEventListener("mouseup",t=>{let i=this.map[t.button];i&&(this.Mt[i]=!1)}),window.addEventListener("click",t=>{t.preventDefault()}),window.addEventListener("contextmenu",t=>{let i=this.map[t.button];i&&(this.Mt[i]=!0),this.Lt=2,t.preventDefault()}),z.mt()},$i(){this.Lt&&(this.Lt--,0===this.Lt&&(this.Mt[v.lt.Ht]=!1))},mt(){this.Nt=void 0;for(let t of Object.values(v.lt))this.Mt[t]=!1}},v={lt:{ot:11,ft:12,at:13,ut:14,bt:21,Ht:30,ct:96,kt:97,Rt:98},init(){this.ts={x:0,y:0,l:0},this.hs={},this.Dt={},this.Mt={},this.gt={},V.init(),z.init()},$i(){V.$i(),z.$i();for(let t of Object.values(v.lt)){let i=z.Mt[t]||V.Mt[t];this.hs[t]=!this.Mt[t]&&i,this.Dt[t]=this.Mt[t]&&!i,this.hs[t]?this.gt[t]=1:this.Mt[t]&&i&&this.gt[t]++,this.Mt[t]=i}this.Nt=z.Nt,this.ts=V.ts},Kt(t){},Gt(t){}},q=[41,61,[[24,1,5,4,5,3],[13,4,7,3,6,3],[33,5,6,5,7,4],[23,7,5,5,8,2],[11,8,5,4,9,2],[29,11,3,3,10,1],[18,12,4,7,11,3],[35,12,5,5,12,5],[24,13,3,5,13,0],[7,14,3,5,14,0],[11,14,5,5,15,1],[3,16,1,1,1],[23,20,5,5,16,3],[33,20,6,6,17,3],[11,21,4,4,18,2],[18,21,3,3,19,1],[18,26,5,4,20,3],[27,26,5,4,21,0],[10,27,6,4,22,3],[24,31,10,7,23,4],[12,32,9,4,24,5],[10,51,12,9,25,0]],[231,41,29,4,13,1,27,10,1,1,1,28,1,1,1,1,8,41,7,41,17,12,29,30,1,1,26,12,1,1,1,1,17,1,7,3,1,8,1,2,1,1,4,6,1,12,1,1,2,9,1,1,1,1,24,2,1,1,10,1,1,21,4,1,1,23,6,6,5,24,6,11,41,1,1,30,1,6,1,1,40,41,24,12,5,24,12,40,1,41,1,1,75,10,25,6]],F={Vt:t=>t.reduce((t,i)=>(t[i.Wt]=i,t),{}),It(t,i){let s=H(t[0].length,t.length,()=>0);for(let h=0;h<s.length;h++)for(let e=0;e<s[0].length;e++)if(t[h][e]){let r=i[t[h][e]];s[h][e]=(t[h-1][e]?0:1)|(t[h][e+1]?0:2)|(t[h+1][e]?0:4)|(t[h][e-1]?0:8),r&&(s[h][e]|=(t[h-1][e]&&h===r.r?16:0)|(t[h][e+1]&&e===r.u+r.w-1?32:0)|(t[h+1][e]&&h===r.r+r.k-1?64:0)|(t[h][e-1]&&e===r.u?128:0))}return s},vt(){let t=H(q[0],q[1],()=>0),i=q[2].map(t=>({u:t[0],r:t[1],w:t[2],k:t[3],Wt:t[4],es:t[5]})),s=0;for(let i of q[3])s+=i,t[s/q[0]|0][s%q[0]]=3;for(let s of i)for(let i=0;i<s.k;i++)for(let h=0;h<s.w;h++)t[s.r+i][s.u+h]=s.Wt;let h=this.Vt(i);return{R:t,q:this.It(t,h),Pt:h,w:q[0],k:q[1]}}},J={10:0,32:3,33:3,39:2,44:3,46:3,73:2},Q={},X={init(){X.jt=R.font._;let t=[[108,R.F],[114,R.Y]];for(let i of t)Q[i[0]]=i[1],J[i[0]]=i[1]._.width+1;X.Zt=$(X.jt,p(0,0,0,1)),X.qt=$(X.jt,p(90,20,90,.15)),X.blue=$(X.jt,p(200,40,220,1)),X.Ct=$(X.jt,p(240,50,200,.2)),X.tt=$(X.jt,p(240,240,255,.25)),X.red=$(X.jt,p(240,50,50,1))},zt(t,i,s,h,e=1,r=X.jt,l){for(let n=0;n<i.length;n++){let o=i.charCodeAt(n);if(Q[o])t.drawImage(Q[o]._,s,h-(Q[o]._.height-5)/2);else{let i=4*(o-32);l&&t.drawImage(l,i%180,6*(i/180|0),3,5,s+1,h+1,3*e,5*e),t.drawImage(r,i%180,6*(i/180|0),3,5,s,h,3*e,5*e)}s+=(J[o]||4)*e}},Bt(t,i,s,h,e,r,l=1,n=X.jt,o){let f=s,a=h,u=i.split(" ");for(let i of u){for(;"\n"===i[0];)i=i.slice(1),f=s,a+=7*l;let h=X.Ft(i,l);f+h-s>e&&(f=s,a+=7*l),X.zt(t,i,f,a,l,n,o),f+=h+(J[32]||4)}},Ft:(t,i)=>t.split("").reduce((t,i)=>t+(J[i.charCodeAt(0)]||4),0)*i};function $(t,i){let s=N(t.width,t.height);return s.t.fillStyle=i,s.t.fillRect(0,0,t.width,t.height),s.t.globalCompositeOperation="destination-in",s.t.drawImage(t,0,0),s.e}class _{constructor(t,i,s){this.rs=t,this.Yt=i,this.Jt=s,this.Qt=[],this.Xt=[];var h=t/2;for(let t=0;t<h;t++)this.Qt.push(2*Math.random()-1),this.Xt.push(2*Math.random()-1);this.ls=-1}$i(){if(this.ls++,this.ls>=this.rs)return!1;let t=this.ls/2,i=0|t,s=i+1,h=1-this.ls/this.rs;return this.x=this.Yt*h*(this.Qt[i]+(t-i)*(this.Qt[s]-this.Qt[i])),this.y=this.Jt*h*(this.Xt[i]+(t-i)*(this.Xt[s]-this.Xt[i])),!0}}class tt{constructor(t,i){this.M={...t},this.angle=i,this._t=r,this.p=-1,this.d=6,this.range=55,Et.$t.push(new _(6,6,6))}ti(){if(++this.p===this.d&&(this.ii=!0),3===this.p){let t=Et.ns.filter(t=>t.si&&t!==Et.I);for(let i of t){let t=a(this.M,i.M);if(t.l>=this.range+i.hi)continue;let s=a(this.M,{x:i.M.x-t.y*i.hi,y:i.M.y+t.x*i.hi}),h=a(this.M,{x:i.M.x+t.y*i.hi,y:i.M.y-t.x*i.hi}),e=[c(s),c(h)];if(!y(e[0],e[1],this.angle-this._t/2,this.angle+this._t/2))continue;let r=[];A(this.M,u(e[0],t.l));for(let i of d(this.M,u(e[0],t.l)))if(!S(i.u,i.r)){r.push(i);break}for(let i of d(this.M,u(e[1],t.l)))if(!S(i.u,i.r)){r.push(i);break}r.length<2&&i.Et.push({ei:100,ri:t,ni:t.l>32?5:10})}}}oi(){}}class it{constructor(t){this.p=-1,this.d=t,this.z=101}ti(){++this.p===this.d&&(this.ii=!0)}oi(){for(let t=0;t<Et.I.li;t++){let i=t*this.d/Et.I.li,s=i-3|0;if(this.p===s&&Y.play(Y.Tt),this.p>=s){let s=Math.min(10,10+this.p-i);o.t.globalAlpha=Math.min(1,1+(this.p-i)/10),o.t.drawImage(R.X._,15+6*t,s),o.t.globalAlpha=1}}}}class st{constructor(t,i,h){this.M={...t},this.angle=i,this.ai=M(u(this.angle,5)),this.a=s,this.fi=!0,this.f=h,this.ui=this.f>-1,this.hi=1,this.r=0,this.p=-1,this.d=0===this.f?45:70}ti(){++this.p===this.d&&(this.ii=!0),this.ai.x*=.9,this.ai.y*=.9,this.a*=.95,this.r+=this.a}oi(){R.rt(R.g[this.f],this.M,this.r)}}st.Et=t=>st.ci(t,8,()=>0),st.yi=t=>st.ci(t,16,()=>4*Math.random()|0),st.ci=(t,i,h)=>{let e=t.Mi?c(t.Mi.ri):Math.random()*n;for(let r=0;r<i;r++){let i=Math.random()*t.hi,r=A(t.M,u(Math.random()*n,i));Et.ns.push(new st(r,e+Math.random()*l-s,h()))}};class ht{constructor(t){this.M={...t},this.p=-1,this.d=40,this.z=101}ti(){++this.p===this.d&&(this.ii=!0)}oi(){let t=["s","t","u","v","w"],i=T(this.M);o.t.globalAlpha=1-this.p/this.d;for(let s=0;s<5;s++){let h=M(u(e*s+this.p/36,12));X.zt(o.t,t[s],i.s+h.x+2*Math.random()-2,i.h+h.y+2*Math.random()-3,1,X.blue,X.Ct)}o.t.globalAlpha=1}}const et={oi(){let t=E(Et.I.si,0,100);o.t.drawImage(R.G[0]._,2,2),o.t.drawImage(R.G[1]._,0,0,t+8,8,2,2,t+8,8);let i=R.X;for(let t=0;t<Et.I.li;t++)t+1>Et.I.Ai&&(i=R.J),o.t.drawImage(i._,15+6*t,10);X.zt(o.t,"stuvw",o.width-34-60,4,2,X.blue,X.Ct);let s=Et.wi?666:Et.I.os;if(s>0||Et.I.xi>0){if(et.di&&Et.ls>=et.di.start&&Et.ls<=et.di.end){let t=5*(Et.ls-et.di.start)/(et.di.end-et.di.start);o.t.globalAlpha=1-t/10}else o.t.globalAlpha=.5;o.t.drawImage(R.c[1]._,o.width-47,2),o.t.globalAlpha=1,o.t.drawImage(R.c[0]._,o.width-47,2),X.zt(o.t,"x"+(""+s).padStart(3,"0"),o.width-34,4,2,Et.wi?X.red:X.blue,X.Ct)}et.mi(),v.Nt&&(Et.D&&(o.t.globalAlpha=.5),R.rt(R.K[0],w(v.Nt),Et.ls/72),o.t.globalAlpha=1)},Ti(){et.di={start:Et.ls,end:Et.ls+30}},mi(){let t=et.Ei();if(t){let i=a(Et.I.M,t.M),s=c(i);if(i.l=E(i.l/2,16,o.height/2-5),i.l>64){let t=A(Et.I.M,i);o.t.globalAlpha=.2*Math.sin(Et.ls/20)+.8,R.rt(R.c[2],t,s+l),o.t.globalAlpha=1}}},Ei(){let t=Et.ns.filter(t=>t.c),i=Et.I.M;return t.sort((t,s)=>(t.M.x-i.x)**2+(t.M.y-i.y)**2-((s.M.x-i.x)**2+(s.M.y-i.y)**2)),t[0]}};class rt{constructor(t,i){this.p=-1,this.d=40,this.z=101,this.a=R.nt(R.c[0],t),this.a.s-=R.c[0].Q.x,this.a.h-=R.c[0].Q.y,this.b={s:o.width-47,h:2},this.ei=i}ti(){10===this.p&&Y.play(Y.c),this.p%8==0&&(Et.I.si=E(Et.I.si+1,0,100)),++this.p===this.d&&(this.ii=!0,Et.I.os+=this.ei,et.Ti())}oi(){let t={s:(this.b.s-this.a.s)*this.p/this.d+this.a.s,h:(this.b.h-this.a.h)*this.p/this.d+this.a.h};o.t.drawImage(R.c[0]._,t.s,t.h)}}class lt{constructor(t,i){this.M={...t},this.ei=i,this.angle=Math.random()*n,this.ai=M(u(this.angle,3*Math.random()+1)),this.pi=60*Math.random()|0,this.hi=3,this.fi=!0,this.c=!0,Et.wi&&(this.ii=!0)}ti(){this.ai.x*=.95,this.ai.y*=.95,a(this.M,Et.I.M).l<Et.I.hi+this.hi+2&&106!==Et.I.fs&&107!==Et.I.fs&&(this.ii=!0,Et.ns.push(new rt(this.M,this.ei)))}oi(){let t={x:this.M.x,y:this.M.y+2*Math.sin((Et.ls+this.pi)/30)};R.rt(R.c[1],t),R.rt(R.c[0],t)}}class nt{constructor(){this.M=L(Et.R.Pt[1]),this.ai={x:0,y:0},this.si=100,this.Et=[],this.as=[],this.Oi={x:0,y:-1,l:0},this.hi=11,this.Ai=4,this.li=4,this.Ui=!1,this.Si=3,this.os=400,this.xi=0,this.fs=107,this.rs=29}ti(){if(this.as.unshift({...this.M}),this.as.splice(50),104===this.fs)Et.D&&Et.D.bi?this.ai={x:0,y:0}:this.Hi(1),Et.D&&Et.D.Ni||v.hs[v.lt.bt]&&(0===this.Ai?this.us():this.Li()),Et.D&&Et.D.ki||v.hs[v.lt.Ht]&&this.Ai<this.li&&this.us(),this.si<75&&(Et.Ri[8]=!0),this.xi>0&&(Et.Ri[5]=!0);else if(201===this.fs)this.Hi(1),--this.rs<=0&&(0===this.Ai?this.us(!0):this.fs=104);else if(202===this.fs)this.Hi(this.Ui?.5:2),--this.rs<=0&&(this.Ai=this.li,this.fs=104);else if(106===this.fs)Et.wi?(this.fs=104,Et.$t.push(new _(15,15,25))):(this.fs=107,this.rs=120,this.Di()),this.si=100,this.xi++,st.yi(this),st.yi(this);else if(107===this.fs){if(Et.gi&&this.rs--,30===this.rs&&(this.M=L(Et.R.Pt[1]),this.ai={x:0,y:0},Et.N)){for(let t of Et.N.Ki)t.ii=!0;Et.N=!1}0===this.rs&&(this.fs=104,Et.ns.push(new ht(this.M)),Et.Ri[0]=Et.Ri[1]=Et.Ri[2]=Et.Ri[3]=Et.Ri[4]=!0)}}Hi(i){v.Nt&&(this.Oi=a(this.M,w(v.Nt)),this.Gi=c(this.Oi)-t);let s=v.ts.x*v.ts.l*1.7*i,h=v.ts.y*v.ts.l*1.7*i;this.ai.x=(this.ai.x+s)/2,this.ai.y=(this.ai.y+h)/2}Li(){Y.play(Y.dt),this.fs=201,this.rs=10,this.Ai--;let t={x:this.M.x+8*this.Oi.x-3*this.Oi.y,y:this.M.y+8*this.Oi.y+3*this.Oi.x};Et.ns.push(new tt(t,this.Gi)),this.ai=M({...f(this.Oi),l:-1})}us(t){this.Ui=t,this.fs=202,this.rs=20,this.Ai=0,Et.ns.push(new it(this.rs))}oi(){if(106===this.fs||107===this.fs)return;let t,i=R.I[0],s=(Et.ls/30|0)%2;201===this.fs&&this.rs>=2&&(i=R.I[1],t=R.v[6-this.rs]);let h=202!==this.fs||this.Ui?0:15;for(let e=Math.min(h,history.length);e>=0;e--){let{s:h,h:r}=R.nt(i,this.as[e]);o.t.save(),o.t.globalAlpha=0===e?1:.5,o.t.translate(h+i.Q.x,r+i.Q.y),o.t.rotate(this.Gi+l),o.t.drawImage(i._,-i.Q.x,-i.Q.y),o.t.drawImage(R.I[2]._,-i.Q.x,-i.Q.y+s),t&&o.t.drawImage(t._,3-t.Q.x,-20-t.Q.y),o.t.restore()}}Di(){let t=Math.min(this.os,7),i=this.os/t|0,s=this.os-i*t;for(let h=0;h<t;h++)Et.ns.push(new lt(this.M,i+s)),s=0;this.os=0}}class ot{constructor(t){this.M={...t},this.si=200,this.Et=[],this.ai={x:0,y:0},this.Oi={x:0,y:-1,l:0},this.hi=8,this.Si=.5,this.Vi=0,this.fs=103,this.Wi=!0,Et.Ri[6]=!0}ti(){let t=this.Oi=a(this.M,Et.I.M);this.Gi=c(this.Oi),103===this.fs?(t.l<38&&Math.random()<.05&&Et.ls>this.Vi+60&&(this.fs=202,this.rs=24),t.l=E(t.l,0,.75),this.ai={x:(this.ai.x+t.x*t.l)/2,y:(this.ai.y+t.y*t.l)/2}):202===this.fs?(0==this.rs--&&(this.fs=201,this.rs=12),this.ai={x:0,y:0}):201===this.fs?(0==this.rs--&&(this.fs=103,this.Vi=Et.ls),1===this.rs&&t.l<23&&Et.I.Et.push({ei:12,ri:t,ni:5}),t.l=E(t.l,0,3),this.ai={x:t.x*t.l,y:t.y*t.l}):106===this.fs&&(this.ii=!0,st.yi(this),Et.ns.push(new lt(this.M,1)),Et.ns.push(new lt(this.M,2)))}oi(){let t=R.j[(Et.ls/12|0)%2];202===this.fs&&(t=R.j[2]),201===this.fs&&(t=R.j[3]),R.rt(t,this.M,this.Gi+l)}}class ft{constructor(t){this.M={...t},this.si=100,this.Et=[],this.hi=3,this.Si=1,this.ui=!0,this.Wi=!0,Et.Ri[7]=!0;let s=Math.random()*n;s%l<i&&(s+=i),s%l>h&&(s-=i),this.Oi=u(s),this.ai=this.Oi,this.fs=103}ti(){if(103===this.fs){let t=f(this.ai);t.l=(t.l+2.5)/2,this.ai=M(t);let i=a(this.M,Et.I.M);i.l<=this.hi+Et.I.hi&&Et.I.Et.push({ei:5,ri:i,ni:3})}else 106===this.fs&&(this.ii=!0,st.yi(this),Et.ns.push(new lt(this.M,1)),Et.ns.push(new lt(this.M,2)))}oi(){R.rt(R.P[0],this.M,Et.ls/5),R.rt(R.P[1],this.M)}}const at=[[[ot,1,1,1,1,1]],[[ft,1,1,1,1,1]],[[ot,5,,,,1,1,1],[ft,,,,,3,,3]],[[ot,,1,,1,,1],[ft,2,,2,,2,,3]],[[ot,20,,,,,,,],[ft,,,,,1,1,1,1]],[[ot,,,,,,,6],[ft,3,,3,,3,,,3]]],ut={apply(){if(Et.N){let t=Et.N.Ki.filter(t=>!t.ii).length;if(0===Et.N.Ii.length)0===t&&(Et.vi[Et.N.L.Wt]=!0,Et.N=!1);else{let i=Et.N.Ii[0];Et.ls>=Et.N.start+i[1]?ut.Pi(i)&&Et.N.Ii.shift():0===t&&(i[1]-=6)}}else{let i={u:(t=Et.I.M).x/32|0,r:t.y/32|0},s=Et.R.Pt[Et.R.R[i.r][i.u]];s&&s.Wt>=5&&!Et.vi[s.Wt]&&!Et.wi&&i.u>s.u&&i.r>s.r&&i.u<s.u+s.w-1&&i.r<s.r+s.k-1&&(Et.$t.push(new _(20,20,20)),Et.N={L:s,Ki:[],start:Et.ls,Ii:ut.ji(at[s.es])},Y.play(Y.pt))}var t},ji(t){let i=[];for(let s of t){let t=s[0];for(let h=1;h<s.length;h++)for(let e=0;e<s[h];e++)i.push([t,30*(h-1)+10*e])}return i.sort((t,i)=>t[1]-i[1]),i},Pi(t){let i={x:(Math.random()*(32*Et.N.L.w-32)|0)+32*Et.N.L.u+16,y:(Math.random()*(32*Et.N.L.k-32)|0)+32*Et.N.L.r+16};if(a(Et.I.M,i).l>48){let s=new t[0](i);return Et.ns.push(s),Et.N.Ki.push(s),Et.ns.push(new ht(i)),s}}},ct={apply(t){let i=t.filter(t=>t.M&&t.ai&&!t.ii);for(let t=0;t<5;t++){for(let t=0;t<i.length-1;t++)for(let s=t+1;s<i.length;s++)ct.Zi(i[t],i[s]);for(let t of i)ct.qi(t)}for(let t of i)t.M.x+=t.ai.x,t.M.y+=t.ai.y},Zi(t,i){if(t.fi||i.fi)return;let s=function(t,i,s,h,e,r){[s,r]=[M(s),M(r)];let l=a({x:t.x+s.x,y:t.y+s.y},{x:h.x+r.x,y:h.y+r.y});if(l.l<i+e)return{O:l.x,U:l.y,l:i+e-l.l}}(t.M,t.hi,t.ai,i.M,i.hi,i.ai);if(s)if(t.ui&&i.ui)t.ai.x=-s.O*s.l,t.ai.y=-s.U*s.l,i.ai.x=s.O*s.l,i.ai.y=s.U*s.l;else{let h=f(t.ai).l+i.Si,e=f(i.ai).l+t.Si,r=t.ui?.1:1,l=i.ui?.1:1;t.ai.x-=s.O*s.l*r*h/(h+e),t.ai.y-=s.U*s.l*r*h/(h+e),i.ai.x+=s.O*s.l*l*e/(h+e),i.ai.y+=s.U*s.l*l*e/(h+e)}},qi(t){if(!t.Ci)for(let i of function*(t,i,s){yield*function*(t,i,s){let h=[{x:Math.min(t.x,i.x)-s,y:Math.min(t.y,i.y)-s},{x:Math.max(t.x,i.x)+s,y:Math.max(t.y,i.y)+s}];yield*function*(t){for(let i=t[0].y/32|0;32*i<t[1].y;i++)for(let s=t[0].x/32|0;32*s<t[1].x;s++)yield{u:s,r:i}}(h)}(t,{x:t.x+i.x,y:t.y+i.y},s)}(t.M,t.ai,t.hi))if(!S(i.u,i.r)){let s=[x(i),x({u:i.u+1,r:i.r+1})],h=U(t.M,{x:t.M.x+t.ai.x,y:t.M.y+t.ai.y},t.hi,s);h&&(t.ui?0===h.O?t.ai.y=-t.ai.y:0===h.U?t.ai.x=-t.ai.x:(t.ai.x+=h.O,t.ai.y+=h.U):0===h.O?t.ai.y=h.y-t.M.y:0===h.U?t.ai.x=h.x-t.M.x:(t.ai.x+=h.O,t.ai.y+=h.U))}}};class Mt{constructor(t,i){this.start=t,this.ei=i,this.p=-1,this.d=20,this.z=101,this.y=5,this.ai=-.7,this.zi=.09}ti(){++this.p===this.d&&(this.ii=!0),this.y+=this.ai,this.ai+=this.zi}oi(){let t=this.start-this.ei+8;this.p>15&&(o.t.globalAlpha=1-.1*this.p),o.t.drawImage(R.G[2]._,t,3,this.ei,3,t+2,this.y,this.ei,3),o.t.globalAlpha=1}}const At={apply(t){let i=!1;for(let s of t)if(s.si){if(s.Et.length>0){if(106!==s.fs&&107!==s.fs)for(let t of s.Et)s===Et.I&&Et.ns.push(new Mt(s.si,t.ei)),s.si-=t.ei,t.ri.l=t.ni,s.ai=A(s.ai,t.ri),s.Mi=t,st.Et(s),i=!0;s.Et=[]}s.si<=0&&106!==s.fs&&(s.fs=106)}i&&Y.play(Y.Et)}};class yt{constructor(t){let i=yt.Bi[t];this.Fi=t,this.text=i.text,this.Yi=i.Yi,this.ki=i.ki,this.Ni=i.Ni,this.Yi&&(this.bi=this.Ni=this.ki=!0),this.p=0,this.d=this.Yi?100:40,this.z=102,Et.D=this}ti(){this.p<this.d&&this.p++,Et.Ji[this.Fi]=!0,2===this.Fi?v.ts.l>0&&(this.ii=!0,Et.D=!1):4===this.Fi?v.hs[v.lt.Ht]&&(this.ii=!0,Et.D=!1):v.hs[v.lt.bt]&&(this.p<this.d?this.p=this.d:(this.ii=!0,Et.D=!1))}oi(){let t=R.st,i=o.i.s+5,s=o.i.h+8,h=i+8,e=s+12;this.Yi||(t=R.ht,i=o.i.s-R.ht._.width/2,s=o.height-R.ht._.height-8,h=i+5,e=s+5),o.t.drawImage(t._,i,s),X.Bt(o.t,b(this.text,this.p,this.d),h,e,115,50,1,X.Zt,X.qt)}}yt.Bi=[{text:"SHOGGOTH'S ARMPIT! THE SHOTGUN ARCANA IS SCATTERED ALL OVER THIS DUNGEON!",Yi:!0},{text:"HELP ME FIND MY MISSING PAGES AND REGAIN MY POWERS.",Yi:!0},{text:"USE WASD OR mnop TO MOVE",Ni:!0,ki:!0},{text:"USE l TO FIRE YOUR SHOTGUN",ki:!0},{text:"USE r TO RELOAD",Ni:!0},{text:"BE CAREFUL OUT THERE, WE NEED THOSE PAGES BACK!",Yi:!0},{text:"STABGUTS! LOOK OUT FOR THE POINTY END.",Yi:!0},{text:"SPINDOCTORS! YOU'LL GET MORE THAN A HAIRCUT FROM THOSE THINGS.",Yi:!0},{text:"DON'T FORGET, PICK UP LOST PAGES TO RECOVER SOME HEALTH!",Yi:!0}];const xt={apply(){if(!Et.D&&!Et.N&&!Et.wi)for(let t=0;t<yt.Bi.length;t++)if(Et.Ri[t]&&!Et.Ji[t])return void Et.ns.push(new yt(t))}},Tt={apply(){if(Et.I.os>=404&&!Et.wi){Tt.ls=0,Et.wi=!0,Et.I.M=L(Et.R.Pt[25]),Et.N=!1;for(let t of Et.ns)t.Wi&&(t.fs=106)}else if(Et.wi){Tt.ls++,10===Tt.ls&&(Et.ns.push(new ht(Et.I.M)),Et.$t.push(new _(20,20,90)));let t=Et.ns.filter(t=>t.Wi).length;if(Tt.ls%30==0&&t<25){let t=A(Et.I.M,u(Math.random()*n,48)),i=new(0,[ot,ot,ft][3*Math.random()|0])(t);Et.ns.push(i),Et.ns.push(new ht(t))}}}},wt={oi(){let t=o.t,i=Et.R,s=o.i.s-Et.A.M.x,h=o.i.h-Et.A.M.y,e=0,r=i.k,l=0,n=i.w;Et.N?(e=Et.N.L.r,r=e+Et.N.L.k,l=Et.N.L.u,n=l+Et.N.L.w,o.t.fillStyle=p(10,10,10,1),o.o()):o.t.drawImage(R.$._,-16-Et.A.M.x%32,-8-Et.A.M.y%32);for(let o=e;o<r;o++)for(let e=l;e<n;e++){let r=32*e+s,l=32*o+h;if(r<-50||l<-50||r>500||l>500)continue;let n=R.Z[i.R[o][e]?1:0];t.drawImage(n._,r,l)}for(let o=e;o<r;o++)for(let e=l;e<n;e++){let r=32*e+s,l=32*o+h;if(r<-50||l<-50||r>500||l>500)continue;let n=[[0,0,36,4,r-2,l-2,36,4],[32,0,4,36,r+30,l-2,4,36],[0,32,36,4,r-2,l+30,36,4],[0,0,4,36,r-2,l-2,4,36]];for(let s=0;s<4;s++)i.q[o][e]&1<<s&&t.drawImage(R.q._,...n[s]);if(Et.N)for(let s=0;s<4;s++)i.q[o][e]&16<<s&&t.drawImage(R.it._,...n[s])}if(!Et.N)for(let t of Object.values(i.Pt))if(t.Wt>=3&&!Et.vi[t.Wt]){let i=T({x:32*(t.u+t.w/2),y:32*(t.r+t.k/2)});o.t.globalAlpha=1-Et.ls%30/30,X.zt(o.t,"!",i.s-4,i.h-10,4,X.red,X.Ct),o.t.globalAlpha=1}}},Et=new class{init(){R.B(()=>{o.init(),R.init(),X.init(),v.init(),Y.init(),this.R=F.vt(),this.ns=[],this.Ri={},this.Ji={},this.vi={},this.Qi=N(500,500),this.Xi=0,this.$t=[],this.I=new nt,this.ns.push(this.I),this.A={M:{...this.I.M}},window.addEventListener("blur",()=>this.is()),window.addEventListener("focus",()=>this.ss()),this.start()})}start(){this.ls=0,this.$i(),window.requestAnimationFrame(()=>this._i(1))}_i(t){this.ls++,o.n(),this.$i(),this.oi(o.t),window.requestAnimationFrame(()=>this._i(t))}$i(){if(v.$i(),this.cs)return;Y.$i();for(let t of Et.ns)t.ti&&t.ti();At.apply(this.ns),ct.apply(this.ns),xt.apply(),ut.apply(),Tt.apply(),this.ns=this.ns.filter(t=>!t.ii);let t=this.I.M.x-this.A.M.x,i=this.I.M.y-this.A.M.y;this.A.M.x+=.2*t,this.A.M.y+=.2*i,this.$t=this.$t.filter(t=>t.$i()),Et.ls%6==0&&(this.Xi=10*Math.random()|0),30===Et.ls&&Et.$t.push(new _(20,20,20)),v.hs[v.lt.bt]&&!Et.gi&&(Et.gi=!0)}oi(){o.t.setTransform(1,0,0,1,0,0),o.t.scale(o.scale,o.scale);let t=0,i=0;this.$t.forEach(s=>{t+=s.x,i+=s.y}),o.t.translate(t,i),wt.oi();for(let t of this.ns)(t.z>0||!t.z)&&t.oi();o.t.drawImage(R.tt._,0,0,500,500,-this.Xi,-this.Xi,o.width+2*this.Xi,o.height+2*this.Xi),et.oi();for(let t of this.ns)t.z&&t.z>100&&t.oi();if(Et.ls<120&&(o.t.fillStyle=p(0,0,0,1-Et.ls/120),o.o()),Et.ls>=30&&!Et.gi){let t="WIZARD WITH A SHOTGUN",i=X.Ft(t,3);X.zt(o.t,t,(o.width-i)/2,o.height/2,3,X.jt,X.red)}if(Et.wi){o.t.fillStyle=p(240,0,0,E(Tt.ls/1800,0,.7)),o.o();let t="WAIT! THE PORTAL HOME... \n \nIT STINKS LIKE ROTTEN MEAT, BUT IT LOOKS LIKE YOU ARE STUCK IN THE DUNGEONS.";X.Bt(o.t,b(t,Tt.ls,600),40,40,o.width-80,o.t.height-80,2,X.jt,X.red)}}is(){this.cs||(this.cs=!0,Y.is())}ss(){this.cs&&(this.cs=!1,Y.ss())}};Et.init()}();
//# sourceMappingURL=app.js.map</script>