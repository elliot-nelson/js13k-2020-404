<style>body,html{margin:0;padding:0;background-color:#000}div{position:absolute;top:0;bottom:0;left:0;right:0}#canvas{width:100%;height:100%}</style><div><canvas id="canvas"></canvas></div><script>!function(){"use strict";const t=6*Math.PI/180,i=20*Math.PI/180,s=45*Math.PI/180,h=70*Math.PI/180,e=72*Math.PI/180,r=80*Math.PI/180,l=90*Math.PI/180,n=360*Math.PI/180,o={init(){o.e=document.getElementById("canvas"),o.t=o.e.getContext("2d"),o.n(!0)},n(t){let i=window.devicePixelRatio,s=o.e.clientWidth,h=o.e.clientHeight,e=s*i,r=h*i;(t||o.e.width!==e||o.e.height!==r)&&(o.e.width=e,o.e.height=r,o.scale=(10*Math.max(e/480,r/270)|0)/10,o.width=Math.ceil(e/o.scale),o.height=Math.ceil(r/o.scale),o.i={s:o.width/2|0,h:o.height/2|0},o.clientWidth=s,o.clientHeight=h,o.t.imageSmoothingEnabled=!1),o.e.style.cursor="none"},o(){o.t.fillRect(0,0,o.width,o.height)}};function f(t){let i=Math.sqrt(t.x*t.x+t.y*t.y);return 0===i?{x:0,y:0,l:0}:{x:t.x/i,y:t.y/i,l:i}}function a(t,i){return f({x:i.x-t.x,y:i.y-t.y})}function u(t,i){return{x:Math.cos(t),y:Math.sin(t),l:i||1}}function c(t){let i=Math.atan2(t.y,t.x);return i<0&&(i+=n),i}function M(t){return{x:t.x*(t.l||1),y:t.y*(t.l||1)}}function y(...t){let i={x:0,y:0,l:1};for(let s of t)i.x+=s.x*(s.l||1),i.y+=s.y*(s.l||1);return i}function A(t,i,s,h){for(t>i&&([t,i]=[i,t]),s>h&&([s,h]=[h,s]);h>=i+n;)h-=n,s-=n;for(;s<=t-n;)s+=n,h+=n;const e=[Math.max(t,s),Math.min(i,h)];return e[0]>e[1]?void 0:e}function w(t){return{x:32*t.u,y:32*t.r}}function x(t){return{s:t.x+o.i.s-Nt.A.M.x,h:t.y+o.i.h-Nt.A.M.y}}function T(t){return{x:t.s-o.i.s+Nt.A.M.x,y:t.h-o.i.h+Nt.A.M.y}}function N(t,i,s){return t<i?i:t>s?s:t}function S(t,i){let s,h,e=i-t;return 0===e?(h=NaN,s=1/0):e>0?(h=1/e,s=(1-(t-(0|t)))*h):(h=-1/e,s=(t-(0|t))*h),{m:s,T:h}}function*d(t,i){yield*function*(t,i){let s=t.x/32,h=t.y/32,e=i.x/32,r=i.y/32,l=Math.abs((0|s)-(0|e))+Math.abs((0|h)-(0|r));if(yield{u:0|s,r:0|h,l:0},l>1){let t=s,i=h,n=0,o=Math.sign(e-s),f=Math.sign(r-h),a=S(s,e),u=S(h,r);for(let s=0;s<l-1;s++)a.m<u.m?(t+=o,n+=o,a.m+=a.T):(i+=f,n+=f,u.m+=u.T),yield{u:0|t,r:0|i,l:n}}l>0&&(yield{u:0|e,r:0|r,l:1})}(t,y(t,i))}function O(t,i,s,h){if(Math.max(t.x,i.x)+s<h[0].x||Math.min(t.x,i.x)-s>h[1].x||Math.max(t.y,i.y)+s<h[0].y||Math.min(t.y,i.y)-s>h[1].y)return;let e=i.x-t.x,r=i.y-t.y,l=0===e?0:1/e,n=0===r?0:1/r,o=1/0,f=1/0;if(t.x-s<h[0].x&&i.x+s>h[0].x){let i=(h[0].x-s-t.x)*l;if(i>=0&&i<=1){let s=r*i+t.y;if(s>=h[0].y&&s<=h[1].y)return{x:e*i+t.x,y:s,p:i,S:-1,N:0,O:h[0].x,k:s}}o=h[0].x}if(t.x+s>h[1].x&&i.x-s<h[1].x){let n=(t.x-(h[1].x+s))*-l;if(n>=0&&n<=1){let s=r*n+i.y;if(s>=h[0].y&&s<=h[1].y)return{x:e*n+t.x,y:s,p:n,S:1,N:0,O:h[1].x,k:s}}o=h[1].x}if(t.y-s<h[0].y&&i.y+s>h[0].y){let i=(h[0].y-s-t.y)*n;if(i>=0&&i<=1){let s=e*i+t.x;if(s>=h[0].x&&s<=h[1].x)return{x:s,y:r*i+t.y,p:i,S:0,N:-1,O:s,k:h[0].y}}f=h[0].y}if(t.y+s>h[1].y&&i.y-s<h[1].y){let i=(t.y-(h[1].y+s))*-n;if(i>=0&&i<=1){let s=e*i+t.x;if(s>=h[0].x&&s<=h[1].x)return{x:s,y:r*i+t.y,p:i,S:0,N:1,O:s,k:h[0].y}}f=h[1].y}if(o===1/0&&f===1/0)return;o!==1/0&&f===1/0&&(f=r>0?h[1].y:h[0].y),f!==1/0&&o===1/0&&(o=e>0?h[1].x:h[0].x);let a=1/s,u=Math.sqrt(e*e+r*r),c=o-t.x,M=f-t.y,y=Math.sqrt(c*c+M*M),A=Math.acos((c*e+M*r)/(u*y));if(y<s)return;if(0===A){let i=(y-s)/u;if(i>1||i<0)return;let h=i*e+t.x,l=i*r+t.y,n=c/y,a=M/y;return isNaN(h)?void 0:{x:h,y:l,p:i,S:n,N:a,O:o,k:f}}let w=Math.sin(A),x=w*y*a;if(Math.abs(x)>1)return;let T=Math.PI-Math.asin(x),N=Math.PI-A-T,S=s*Math.sin(N)/w/u;if(S>1||S<0)return;let d=S*e+t.x,O=S*r+i.y,p=(d-o)*a,E=(O-f)*a;return isNaN(d)?void 0:{x:d,y:O,p:S,S:p,N:E,O:o,k:f}}function p(t,i,s){return Array.from({length:i},()=>Array.from({length:t},s))}function E(t,i){if(Nt.R){let s=Nt.R.D;if(t<s.u||i<s.r||t>=s.u+s.w||i>=s.r+s.v)return!1}return!(t<0||i<0||t>=Nt.P.w||i>=Nt.P.v||!Nt.P.P[i][t])}function b(t,i,s,h){return`rgba(${t},${i},${s},${h})`}function R(t,i){let s=document.createElement("canvas");s.width=t,s.height=i;let h=s.getContext("2d");return{e:s,t:h}}function m(t){return{x:32*(t.u+t.w/2),y:32*(t.r+t.v/2)}}function D(t,i,s){let h=N(Math.ceil(i/s*t.length),0,t.length),e=t.slice(0,h),r=t.indexOf(" ",h-1);return r<0&&(r=t.length),r-h>0&&(e+="#".repeat(r-h)),e}const I={U:[[0,0,15,15],[15,0,15,15],[30,0,15,15]],font:[[0,15,180,12]],I:[[0,27,5,5],[5,27,5,5],[10,27,5,5],[15,27,5,5]],G:[[0,32,9,9]],V:[[0,41,109,9],[109,41,109,9]],L:[[0,50,6,7],[6,50,6,7]],j:[[0,57,7,9],[7,57,7,9]],c:[[0,66,12,14],[12,66,12,14],[24,66,12,14]],C:[[0,80,21,32],[21,80,21,32],[42,80,21,32]],g:[[0,112,23,18],[23,112,23,18],[46,112,23,18],[69,112,23,18]],H:[[0,130,17,17],[17,130,17,17]],J:[[0,147,14,22],[14,147,14,22],[28,147,14,22],[42,147,14,22]],K:[[0,169,32,32]],F:[[0,201,4,4],[4,201,4,4]],W:"data:image/png;base64,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"},U={q(t){let i=new Image;i.onload=t,i.src=I.W,U.E=i},init(){U.font=G(I.font[0]),U.Y=G(I.j[0]),U.Z=G(I.j[1]),U.C=I.C.map(t=>G(t,{x:10,y:21})),U.g=I.g.map(t=>G(t,{x:11,y:14})),U.J=I.J.map(G),U.H=I.H.map(G),U.I=I.I.map(G),U.B=G(I.L[0]),U.X=G(I.L[1]),U.V=I.V.map(G),U.V.push(j(function(t){let i=R(t.width,t.height);return i.t.drawImage(t,0,0),i.t.globalCompositeOperation="source-atop",i.t.fillStyle=b(255,255,0,.6),i.t.fillRect(0,0,t.width,t.height),i.e}(U.V[1]._))),U.G=I.G.map(G),U.c=I.c.map(G),U.K=I.K.map(G),U.K[1]=j(function(t){let i=R(32,32);return i.t.fillStyle=b(48,0,0,1),i.t.fillRect(0,0,32,32),i.t.globalAlpha=.6,i.t.globalCompositeOperation="hard-light",i.t.drawImage(t,0,0),k(i),i.e}(U.K[0]._)),U.$=j(function(t){let i=R(544,334);for(let s=0;s<334;s+=32)for(let h=0;h<544;h+=32)i.t.drawImage(t,h,s);return i.e}(U.K[0]._)),U.tt=j(function(){let t=R(500,500),i=t.t.createRadialGradient(250,250,0,250,250,250);return i.addColorStop(.3,b(0,0,0,0)),i.addColorStop(1,b(0,0,0,.9)),t.t.fillStyle=i,t.t.fillRect(0,0,500,500),t.e}());let t=I.F.map(G);U.F=j(function(t){let i=R(36,36);for(let s=0;s<36;s+=4)i.t.drawImage(t,s,0),i.t.drawImage(t,s,32),i.t.drawImage(t,0,s),i.t.drawImage(t,32,s);return k(i),i.e}(t[0]._)),U.it=j(function(t,i){let s=R(36,36);for(let t=0;t<36;t+=4)s.t.drawImage(i,t,0),s.t.drawImage(i,t,32),s.t.drawImage(i,0,t),s.t.drawImage(i,32,t);return s.t.drawImage(t,0,0),s.t.drawImage(t,32,0),s.t.drawImage(t,0,32),s.t.drawImage(t,32,32),k(s),s.e}(t[0]._,t[1]._));let i=I.U.map(G);U.st=j(function(t,i){let s=R(130,45);return s.t.drawImage(C(t).e,0,5),s.t.drawImage(i,5,0),s.e}(i[0]._,i[2]._)),U.ht=j(C(i[1]._).e)},et(t,i,s,h){t.drawImage(i._,s-i.Q.x,h-i.Q.y)},rt(t,i,s){let{s:h,h:e}=this.nt(t,i);s?(o.t.save(),o.t.translate(h+t.Q.x,e+t.Q.y),o.t.rotate(s),o.t.drawImage(t._,-t.Q.x,-t.Q.y),o.t.restore()):o.t.drawImage(t._,h,e)},nt:(t,i)=>({s:i.x-t.Q.x-Nt.A.M.x+o.i.s,h:i.y-t.Q.y-Nt.A.M.y+o.i.h})};function G(t,i){return j(function(t,i,s,h){const e=U.E,r=R(s,h);return r.t.drawImage(e,t,i,s,h,0,0,s,h),r.e}(...t),i)}function j(t,i){let s=t.width,h=t.height;return{_:t,Q:i&&i.x?i:{x:s/2|0,y:h/2|0}}}function k(t){t.t.globalCompositeOperation="source-atop";for(let i=0;i<36;i++)for(let s=0;s<36;s++)t.t.fillStyle=b(0,0,0,.6*Math.random()),t.t.fillRect(s,i,1,1)}function C(t){let i=R(130,40);for(let s=0;s<40;s+=5)for(let h=0;h<130;h+=5){let e=0===h?0:125===h?10:5,r=0===s?0:35===s?10:5;i.t.drawImage(t,e,r,5,5,h,s,5,5)}return i}const P=.7071067811865475,L={init(){L.map={KeyW:g.lt.ot,KeyA:g.lt.at,KeyS:g.lt.ft,KeyD:g.lt.ut,ArrowUp:g.lt.ot,ArrowLeft:g.lt.at,ArrowDown:g.lt.ft,ArrowRight:g.lt.ut,Escape:g.lt.ct},L.Mt=[{x:0,y:0,l:0},{x:0,y:-1,l:1},{x:0,y:1,l:1},{x:0,y:0,l:0},{x:-1,y:0,l:1},{x:-P,y:-P,l:1},{x:-P,y:P,l:1},{x:-1,y:0,l:1},{x:1,y:0,l:1},{x:P,y:-P,l:1},{x:P,y:P,l:1},{x:1,y:0,l:1},{x:0,y:0,l:0},{x:0,y:-1,l:1},{x:0,y:1,l:1},{x:0,y:0,l:0}],L.wt=[],window.addEventListener("keydown",t=>{let i=L.map[t.code];i&&(L.wt[i]=!0)}),window.addEventListener("keyup",t=>{let i=L.map[t.code];i&&(L.wt[i]=!1)}),L.mt()},Xi(){let t=(L.wt[g.lt.ot]?1:0)+(L.wt[g.lt.ft]?2:0)+(L.wt[g.lt.at]?4:0)+(L.wt[g.lt.ut]?8:0);L._i=L.Mt[t]},mt(){L._i=L.Mt[0];for(let t of Object.values(g.lt))L.wt[t]=!1}},H=(...t)=>J(v(...t)),J=(...t)=>{let i=Q.createBufferSource(),s=Q.createBuffer(t.length,t[0].length,K);return t.map((t,i)=>s.getChannelData(i).set(t)),i.buffer=s,i.connect(H.destination),i.start(),i},v=(t=1,i=.05,s=220,h=0,e=0,r=.1,l=0,n=1,o=0,f=0,a=0,u=0,c=0,M=0,y=0,A=0,w=0,x=1,T=0,N=0)=>{let S,d,O=2*Math.PI,p=o*=500*O/K**2,E=(0<y?1:-1)*O/4,b=s*=(1+2*i*Math.random()-i)*O/K,R=[],m=0,D=0,I=0,U=1,G=0,j=0,k=0;for(f*=500*O/K**3,y*=O/K,a*=O/K,u*=K,c=K*c|0,d=(h=99+K*h)+(T*=K)+(e*=K)+(r*=K)+(w*=K)|0;I<d;R[I++]=k)++j%(100*A|0)||(k=l?1<l?2<l?3<l?Math.sin((m%O)**3):Math.max(Math.min(Math.tan(m),1),-1):1-(2*m/O%2+2)%2:1-4*Math.abs(Math.round(m/O)-m/O):Math.sin(m),k=(c?1-N+N*Math.sin(2*Math.PI*I/c):1)*(0<k?1:-1)*Math.abs(k)**n*t*V*(I<h?I/h:I<h+T?1-(I-h)/T*(1-x):I<h+T+e?x:I<d-w?(d-I-w)/r*x:0),k=w?k/2+(w>I?0:(I<d-w?1:(d-I)/w)*R[I-w|0]/2):k),S=(s+=o+=f)*Math.sin(D*y-E),m+=S-S*M*(1-1e9*(Math.sin(I)+1)%2),D+=S-S*M*(1-1e9*(Math.sin(I)**2+1)%2),U&&++U>u&&(s+=a,b+=a,U=0),!c||++G%c||(s=b,o=p,U=U||1);return R},V=.3,K=44100,Q=new(top.AudioContext||webkitAudioContext);H.destination=Q.destination;const F=[[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,{}],q={init(){this.yt=!1,this.t=Q,this.gain=this.t.createGain(),this.gain.connect(this.t.destination),H.destination=this.gain,q.xt=[,.01,140,.01,.02,.45,4,2.42,.1,-.1,,,,1.2,,.3,.04,.8,.02],q.c=[,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01],q.At=[,,68,.01,,.14,1,1.53,7.5,.1,50,.02,-.01,-.2,.1,.2,,.47,.01],q.dt=[,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9],q.Tt=[,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13],q.pt=((t,i,s,h=125)=>{let e,r,l,n,o,f,a,u,c,M,y,A,w,x,T,N,S=[],d=[],O=[],p=0,E=1,b={},R=K/h*60>>2;for(;E;p++)S=[E=u=y=w=0],s.map((h,y)=>{for(a=i[h][p]||[0,0,0],E|=!!i[h][p],T=w+(i[h][0].length-2-!u)*R,r=2,n=w;r<a.length+(y==s.length-1);u=++r){for(o=a[r],c=M!=(a[0]||0)|o|0,l=0;l<R&&u;l++>R-99&&c?A+=(A<1)/99:0)f=(1-A)*S[x++]/2||0,d[n]=(d[n]||0)+f*N-f,O[n]=(O[n++]||0)+f*N+f;o&&(A=o%1,N=a[1]||0,(o|=0)&&(S=b[[M=a[x=0]||0,o]]=b[[M,o]]||(e=[...t[M]],e[2]*=2**((o-12)/12),v(...e))))}w=T});return[d,O]})(...F)},Xi(){this.yt&&(this.St||(this.Et=J(...q.pt),this.Et.loop=!0,this.St=!0))},play(t){this.yt&&H(...t)},$i(){this.gain.gain.linearRampToValueAtTime(0,this.t.currentTime+1)},ts(){this.gain.gain.linearRampToValueAtTime(1,this.t.currentTime+1)}},W={init(){this.map=[],this.map[0]=g.lt.Nt,this.map[2]=g.lt.bt,this.wt=[],window.addEventListener("mousemove",t=>{this.Ot||(this.Ot={}),this.Ot.s=t.clientX*o.width/o.clientWidth|0,this.Ot.h=t.clientY*o.height/o.clientHeight|0}),window.addEventListener("mouseout",()=>{this.Ot=void 0}),window.addEventListener("mousedown",t=>{let i=this.map[t.button];i&&(this.wt[i]=!0),q.yt=!0}),window.addEventListener("mouseup",t=>{let i=this.map[t.button];i&&(this.wt[i]=!1)}),window.addEventListener("click",t=>{t.preventDefault()}),window.addEventListener("contextmenu",t=>{let i=this.map[t.button];i&&(this.wt[i]=!0),this.kt=2,t.preventDefault()}),W.mt()},Xi(){this.kt&&(this.kt--,0===this.kt&&(this.wt[g.lt.bt]=!1))},mt(){this.Ot=void 0;for(let t of Object.values(g.lt))this.wt[t]=!1}},g={lt:{ot:11,ft:12,at:13,ut:14,Nt:21,bt:30,ct:96,Rt:97,Dt:98},init(){this._i={x:0,y:0,l:0},this.is={},this.vt={},this.wt={},this.Pt={},L.init(),W.init()},Xi(){L.Xi(),W.Xi();for(let t of Object.values(g.lt)){let i=W.wt[t]||L.wt[t];this.is[t]=!this.wt[t]&&i,this.vt[t]=this.wt[t]&&!i,this.is[t]?this.Pt[t]=1:this.wt[t]&&i&&this.Pt[t]++,this.wt[t]=i}this.Ot=W.Ot,this._i=L._i},Ut(t){},It(t){}},Y=[41,61,[[24,1,5,4,5,3],[13,4,7,3,6,3],[33,5,6,5,7,4],[23,7,5,5,8,2],[11,8,5,4,9,2],[29,11,3,3,10,1],[18,12,4,7,11,3],[35,12,5,5,12,5],[24,13,3,5,13,0],[7,14,3,5,14,0],[11,14,5,5,15,1],[3,16,1,1,1],[23,20,5,5,16,3],[33,20,6,6,17,3],[11,21,4,4,18,2],[18,21,3,3,19,1],[18,26,5,4,20,3],[27,26,5,4,21,0],[10,27,6,4,22,3],[24,31,10,7,23,4],[12,32,9,4,24,5],[10,51,12,9,25,0]],[231,41,29,4,13,1,27,10,1,1,1,28,1,1,1,1,8,41,7,41,17,12,29,30,1,1,26,12,1,1,1,1,17,1,7,3,1,8,1,2,1,1,4,6,1,12,1,1,2,9,1,1,1,1,24,2,1,1,10,1,1,21,4,1,1,23,6,6,5,24,6,11,41,1,1,30,1,6,1,1,40,41,24,12,5,24,12,40,1,41,1,1,75,10,25,6]],z={Gt:t=>t.reduce((t,i)=>(t[i.Vt]=i,t),{}),Lt(t,i){let s=p(t[0].length,t.length,()=>0);for(let h=0;h<s.length;h++)for(let e=0;e<s[0].length;e++)if(t[h][e]){let r=i[t[h][e]];s[h][e]=(t[h-1][e]?0:8)|(t[h][e+1]?0:4)|(t[h+1][e]?0:2)|(t[h][e-1]?0:1),r&&(s[h][e]|=(t[h-1][e]&&h===r.r?128:0)|(t[h][e+1]&&e===r.u+r.w-1?64:0)|(t[h+1][e]&&h===r.r+r.v-1?32:0)|(t[h][e-1]&&e===r.u?16:0))}return s},jt(){let t=p(Y[0],Y[1],()=>0),i=Y[2].map(t=>({u:t[0],r:t[1],w:t[2],v:t[3],Vt:t[4],ss:t[5]})),s=0;for(let i of Y[3])s+=i,t[s/Y[0]|0][s%Y[0]]=3;for(let s of i)for(let i=0;i<s.v;i++)for(let h=0;h<s.w;h++)t[s.r+i][s.u+h]=s.Vt;let h=this.Gt(i);return{P:t,F:this.Lt(t,h),Ct:h,w:Y[0],v:Y[1]}}},Z={10:0,32:3,33:3,39:2,44:3,46:3,73:2},B={},X={init(){X.gt=U.font._;let t=[[108,U.Y],[114,U.Z]];for(let i of t)B[i[0]]=i[1],Z[i[0]]=i[1]._.width+1;X.Ht=_(X.gt,b(0,0,0,1)),X.Jt=_(X.gt,b(90,20,90,.15)),X.blue=_(X.gt,b(200,40,220,1)),X.Kt=_(X.gt,b(240,50,200,.2)),X.tt=_(X.gt,b(240,240,255,.25)),X.red=_(X.gt,b(240,50,50,1))},Ft(t,i,s,h,e=1,r=X.gt,l){for(let n=0;n<i.length;n++){let o=i.charCodeAt(n);if(B[o])t.drawImage(B[o]._,s,h-(B[o]._.height-5)/2);else{let i=4*(o-32);l&&t.drawImage(l,i%180,6*(i/180|0),3,5,s+1,h+1,3*e,5*e),t.drawImage(r,i%180,6*(i/180|0),3,5,s,h,3*e,5*e)}s+=(Z[o]||4)*e}},Qt(t,i,s,h,e,r,l=1,n=X.gt,o){let f=s,a=h,u=i.split(" ");for(let i of u){for(;"\n"===i[0];)i=i.slice(1),f=s,a+=7*l;let h=X.Wt(i,l);f+h-s>e&&(f=s,a+=7*l),X.Ft(t,i,f,a,l,n,o),f+=h+(Z[32]||4)}},Wt:(t,i)=>t.split("").reduce((t,i)=>t+(Z[i.charCodeAt(0)]||4),0)*i};function _(t,i){let s=R(t.width,t.height);return s.t.fillStyle=i,s.t.fillRect(0,0,t.width,t.height),s.t.globalCompositeOperation="destination-in",s.t.drawImage(t,0,0),s.e}class ${constructor(t,i,s){this.hs=t,this.qt=i,this.Yt=s,this.zt=[],this.Zt=[];var h=t/2;for(let t=0;t<h;t++)this.zt.push(2*Math.random()-1),this.Zt.push(2*Math.random()-1);this.es=-1}Xi(){if(this.es++,this.es>=this.hs)return!1;let t=this.es/2,i=0|t,s=i+1,h=1-this.es/this.hs;return this.x=this.qt*h*(this.zt[i]+(t-i)*(this.zt[s]-this.zt[i])),this.y=this.Yt*h*(this.Zt[i]+(t-i)*(this.Zt[s]-this.Zt[i])),!0}}class tt{constructor(t,i){this.M={...t},this.angle=i,this.Bt=r,this.p=-1,this.d=6,this.range=55,Nt.Xt.push(new $(6,6,6))}_t(){if(++this.p===this.d&&(this.$t=!0),3===this.p){let t=Nt.rs.filter(t=>t.ti&&t!==Nt.C);for(let i of t){let t=a(this.M,i.M);if(t.l>=this.range+i.ii)continue;let s=a(this.M,{x:i.M.x-t.y*i.ii,y:i.M.y+t.x*i.ii}),h=a(this.M,{x:i.M.x+t.y*i.ii,y:i.M.y-t.x*i.ii}),e=[c(s),c(h)];if(!A(e[0],e[1],this.angle-this.Bt/2,this.angle+this.Bt/2))continue;let r=[];y(this.M,u(e[0],t.l));for(let i of d(this.M,u(e[0],t.l)))if(!E(i.u,i.r)){r.push(i);break}for(let i of d(this.M,u(e[1],t.l)))if(!E(i.u,i.r)){r.push(i);break}r.length<2&&i.dt.push({si:100,hi:t,ei:t.l>32?5:10})}}}ri(){}}class it{constructor(t){this.p=-1,this.d=t,this.z=101}_t(){++this.p===this.d&&(this.$t=!0)}ri(){for(let t=0;t<Nt.C.ni;t++){let i=t*this.d/Nt.C.ni,s=i-3|0;if(this.p===s&&q.play(q.At),this.p>=s){let s=Math.min(10,10+this.p-i);o.t.globalAlpha=Math.min(1,1+(this.p-i)/10),o.t.drawImage(U.X._,15+6*t,s),o.t.globalAlpha=1}}}}class st{constructor(t,i,h){this.M={...t},this.angle=i,this.oi=M(u(this.angle,5)),this.a=s,this.li=!0,this.f=h,this.ai=this.f>-1,this.ii=1,this.r=0,this.p=-1,this.d=0===this.f?45:70}_t(){++this.p===this.d&&(this.$t=!0),this.oi.x*=.9,this.oi.y*=.9,this.a*=.95,this.r+=this.a}ri(){U.rt(U.I[this.f],this.M,this.r)}}st.dt=t=>st.fi(t,8,()=>0),st.ui=t=>st.fi(t,16,()=>4*Math.random()|0),st.fi=(t,i,h)=>{let e=t.ci?c(t.ci.hi):Math.random()*n;for(let r=0;r<i;r++){let i=Math.random()*t.ii,r=y(t.M,u(Math.random()*n,i));Nt.rs.push(new st(r,e+Math.random()*l-s,h()))}};class ht{constructor(t){this.M={...t},this.p=-1,this.d=40,this.z=101}_t(){++this.p===this.d&&(this.$t=!0)}ri(){let t=["s","t","u","v","w"],i=x(this.M);o.t.globalAlpha=1-this.p/this.d;for(let s=0;s<5;s++){let h=M(u(e*s+this.p/36,12));X.Ft(o.t,t[s],i.s+h.x+2*Math.random()-2,i.h+h.y+2*Math.random()-3,1,X.blue,X.Kt)}o.t.globalAlpha=1}}const et={ri(){let t=N(Nt.C.ti,0,100);o.t.drawImage(U.V[0]._,2,2),o.t.drawImage(U.V[1]._,0,0,t+8,8,2,2,t+8,8);let i=U.X;for(let t=0;t<Nt.C.ni;t++)t+1>Nt.C.Mi&&(i=U.B),o.t.drawImage(i._,15+6*t,10);X.Ft(o.t,"stuvw",o.width-34-60,4,2,X.blue,X.Kt);let s=Nt.wi?666:Nt.C.ls;if(s>0||Nt.C.yi>0){if(et.xi&&Nt.es>=et.xi.start&&Nt.es<=et.xi.end){let t=5*(Nt.es-et.xi.start)/(et.xi.end-et.xi.start);o.t.globalAlpha=1-t/10}else o.t.globalAlpha=.5;o.t.drawImage(U.c[1]._,o.width-47,2),o.t.globalAlpha=1,o.t.drawImage(U.c[0]._,o.width-47,2),X.Ft(o.t,"x"+(""+s).padStart(3,"0"),o.width-34,4,2,Nt.wi?X.red:X.blue,X.Kt)}et.Ai(),g.Ot&&(Nt.U&&(o.t.globalAlpha=.5),U.rt(U.G[0],T(g.Ot),Nt.es/72),o.t.globalAlpha=1)},di(){et.xi={start:Nt.es,end:Nt.es+30}},Ai(){let t=et.mi();if(t){let i=a(Nt.C.M,t.M),s=c(i);if(i.l=N(i.l/2,16,o.height/2-5),i.l>64){let t=y(Nt.C.M,i);o.t.globalAlpha=.2*Math.sin(Nt.es/20)+.8,U.rt(U.c[2],t,s+l),o.t.globalAlpha=1}}},mi(){let t=Nt.rs.filter(t=>t.c),i=Nt.C.M;return t.sort((t,s)=>(t.M.x-i.x)**2+(t.M.y-i.y)**2-((s.M.x-i.x)**2+(s.M.y-i.y)**2)),t[0]}};class rt{constructor(t,i){this.p=-1,this.d=40,this.z=101,this.a=U.nt(U.c[0],t),this.a.s-=U.c[0].Q.x,this.a.h-=U.c[0].Q.y,this.b={s:o.width-47,h:2},this.si=i}_t(){10===this.p&&q.play(q.c),this.p%8==0&&(Nt.C.ti=N(Nt.C.ti+1,0,100)),++this.p===this.d&&(this.$t=!0,Nt.C.ls+=this.si,et.di())}ri(){let t={s:(this.b.s-this.a.s)*this.p/this.d+this.a.s,h:(this.b.h-this.a.h)*this.p/this.d+this.a.h};o.t.drawImage(U.c[0]._,t.s,t.h)}}class lt{constructor(t,i){this.M={...t},this.si=i,this.angle=Math.random()*n,this.oi=M(u(this.angle,3*Math.random()+1)),this.Ti=60*Math.random()|0,this.ii=3,this.li=!0,this.c=!0,Nt.wi&&(this.$t=!0)}_t(){this.oi.x*=.95,this.oi.y*=.95,a(this.M,Nt.C.M).l<Nt.C.ii+this.ii+2&&106!==Nt.C.ns&&107!==Nt.C.ns&&(this.$t=!0,Nt.rs.push(new rt(this.M,this.si)))}ri(){let t={x:this.M.x,y:this.M.y+2*Math.sin((Nt.es+this.Ti)/30)};U.rt(U.c[1],t),U.rt(U.c[0],t)}}class nt{constructor(){this.M=m(Nt.P.Ct[1]),this.oi={x:0,y:0},this.ti=100,this.dt=[],this.os=[],this.pi={x:0,y:-1,l:0},this.ii=11,this.Mi=4,this.ni=4,this.Si=!1,this.Ei=3,this.ls=400,this.yi=0,this.ns=107,this.hs=29}_t(){if(this.os.unshift({...this.M}),this.os.splice(50),104===this.ns)Nt.U&&Nt.U.Ni?this.oi={x:0,y:0}:this.bi(1),Nt.U&&Nt.U.Oi||g.is[g.lt.Nt]&&(0===this.Mi?this.fs():this.ki()),Nt.U&&Nt.U.Ri||g.is[g.lt.bt]&&this.Mi<this.ni&&this.fs(),this.ti<75&&(Nt.Di[8]=!0),this.yi>0&&(Nt.Di[5]=!0);else if(201===this.ns)this.bi(1),--this.hs<=0&&(0===this.Mi?this.fs(!0):this.ns=104);else if(202===this.ns)this.bi(this.Si?.5:2),--this.hs<=0&&(this.Mi=this.ni,this.ns=104);else if(106===this.ns)Nt.wi?(this.ns=104,Nt.Xt.push(new $(15,15,25))):(this.ns=107,this.hs=120,this.vi()),this.ti=100,this.yi++,st.ui(this),st.ui(this);else if(107===this.ns){if(Nt.Pi&&this.hs--,30===this.hs&&(this.M=m(Nt.P.Ct[1]),this.oi={x:0,y:0},Nt.R)){for(let t of Nt.R.Ui)t.$t=!0;Nt.R=!1}0===this.hs&&(this.ns=104,Nt.rs.push(new ht(this.M)),Nt.Di[0]=Nt.Di[1]=Nt.Di[2]=Nt.Di[3]=Nt.Di[4]=!0)}}bi(i){g.Ot&&(this.pi=a(this.M,T(g.Ot)),this.Ii=c(this.pi)-t);let s=g._i.x*g._i.l*1.7*i,h=g._i.y*g._i.l*1.7*i;this.oi.x=(this.oi.x+s)/2,this.oi.y=(this.oi.y+h)/2}ki(){q.play(q.xt),this.ns=201,this.hs=10,this.Mi--;let t={x:this.M.x+8*this.pi.x-3*this.pi.y,y:this.M.y+8*this.pi.y+3*this.pi.x};Nt.rs.push(new tt(t,this.Ii)),this.oi=M({...f(this.pi),l:-1})}fs(t){this.Si=t,this.ns=202,this.hs=20,this.Mi=0,Nt.rs.push(new it(this.hs))}ri(){if(106===this.ns||107===this.ns)return;let t,i=U.C[0],s=(Nt.es/30|0)%2;201===this.ns&&this.hs>=2&&(i=U.C[1],t=U.g[6-this.hs]);let h=202!==this.ns||this.Si?0:15;for(let e=Math.min(h,history.length);e>=0;e--){let{s:h,h:r}=U.nt(i,this.os[e]);o.t.save(),o.t.globalAlpha=0===e?1:.5,o.t.translate(h+i.Q.x,r+i.Q.y),o.t.rotate(this.Ii+l),o.t.drawImage(i._,-i.Q.x,-i.Q.y),o.t.drawImage(U.C[2]._,-i.Q.x,-i.Q.y+s),t&&o.t.drawImage(t._,3-t.Q.x,-20-t.Q.y),o.t.restore()}}vi(){let t=Math.min(this.ls,7),i=this.ls/t|0,s=this.ls-i*t;for(let h=0;h<t;h++)Nt.rs.push(new lt(this.M,i+s)),s=0;this.ls=0}}class ot{constructor(t){this.M={...t},this.ti=200,this.dt=[],this.oi={x:0,y:0},this.pi={x:0,y:-1,l:0},this.ii=8,this.Ei=.5,this.Gi=0,this.ns=103,this.Vi=!0,Nt.Di[6]=!0}_t(){let t=this.pi=a(this.M,Nt.C.M);this.Ii=c(this.pi),103===this.ns?(t.l<38&&Math.random()<.05&&Nt.es>this.Gi+60&&(this.ns=202,this.hs=24),t.l=N(t.l,0,.75),this.oi={x:(this.oi.x+t.x*t.l)/2,y:(this.oi.y+t.y*t.l)/2}):202===this.ns?(0==this.hs--&&(this.ns=201,this.hs=12),this.oi={x:0,y:0}):201===this.ns?(0==this.hs--&&(this.ns=103,this.Gi=Nt.es),1===this.hs&&t.l<23&&Nt.C.dt.push({si:12,hi:t,ei:5}),t.l=N(t.l,0,3),this.oi={x:t.x*t.l,y:t.y*t.l}):106===this.ns&&(this.$t=!0,st.ui(this),Nt.rs.push(new lt(this.M,1)),Nt.rs.push(new lt(this.M,2)))}ri(){let t=U.J[(Nt.es/12|0)%2];202===this.ns&&(t=U.J[2]),201===this.ns&&(t=U.J[3]),U.rt(t,this.M,this.Ii+l)}}class ft{constructor(t){this.M={...t},this.ti=100,this.dt=[],this.ii=3,this.Ei=1,this.ai=!0,this.Vi=!0,Nt.Di[7]=!0;let s=Math.random()*n;s%l<i&&(s+=i),s%l>h&&(s-=i),this.pi=u(s),this.oi=this.pi,this.ns=103}_t(){if(103===this.ns){let t=f(this.oi);t.l=(t.l+2.5)/2,this.oi=M(t);let i=a(this.M,Nt.C.M);i.l<=this.ii+Nt.C.ii&&Nt.C.dt.push({si:5,hi:i,ei:3})}else 106===this.ns&&(this.$t=!0,st.ui(this),Nt.rs.push(new lt(this.M,1)),Nt.rs.push(new lt(this.M,2)))}ri(){U.rt(U.H[0],this.M,Nt.es/5),U.rt(U.H[1],this.M)}}const at=[[[ot,1,1,1,1,1]],[[ft,1,1,1,1,1]],[[ot,5,,,,1,1,1],[ft,,,,,3,,3]],[[ot,,1,,1,,1],[ft,2,,2,,2,,3]],[[ot,20,,,,,,,],[ft,,,,,1,1,1,1]],[[ot,,,,,,,6],[ft,3,,3,,3,,,3]]],ut={apply(){if(Nt.R){let t=Nt.R.Ui.filter(t=>!t.$t).length;if(0===Nt.R.Li.length)0===t&&(Nt.ji[Nt.R.D.Vt]=!0,Nt.R=!1);else{let i=Nt.R.Li[0];Nt.es>=Nt.R.start+i[1]?ut.Ci(i)&&Nt.R.Li.shift():0===t&&(i[1]-=6)}}else{let i={u:(t=Nt.C.M).x/32|0,r:t.y/32|0},s=Nt.P.Ct[Nt.P.P[i.r][i.u]];s&&s.Vt>=5&&!Nt.ji[s.Vt]&&!Nt.wi&&i.u>s.u&&i.r>s.r&&i.u<s.u+s.w-1&&i.r<s.r+s.v-1&&(Nt.Xt.push(new $(20,20,20)),Nt.R={D:s,Ui:[],start:Nt.es,Li:ut.gi(at[s.ss])},q.play(q.Tt))}var t},gi(t){let i=[];for(let s of t){let t=s[0];for(let h=1;h<s.length;h++)for(let e=0;e<s[h];e++)i.push([t,30*(h-1)+10*e])}return i.sort((t,i)=>t[1]-i[1]),i},Ci(t){let i={x:(Math.random()*(32*Nt.R.D.w-32)|0)+32*Nt.R.D.u+16,y:(Math.random()*(32*Nt.R.D.v-32)|0)+32*Nt.R.D.r+16};if(a(Nt.C.M,i).l>48){let s=new t[0](i);return Nt.rs.push(s),Nt.R.Ui.push(s),Nt.rs.push(new ht(i)),s}}},ct={apply(t){let i=t.filter(t=>t.M&&t.oi&&!t.$t);for(let t=0;t<5;t++){for(let t=0;t<i.length-1;t++)for(let s=t+1;s<i.length;s++)ct.Hi(i[t],i[s]);for(let t of i)ct.Ji(t)}for(let t of i)t.M.x+=t.oi.x,t.M.y+=t.oi.y},Hi(t,i){if(t.li||i.li)return;let s=function(t,i,s,h,e,r){[s,r]=[M(s),M(r)];let l=a({x:t.x+s.x,y:t.y+s.y},{x:h.x+r.x,y:h.y+r.y});if(l.l<i+e)return{S:l.x,N:l.y,l:i+e-l.l}}(t.M,t.ii,t.oi,i.M,i.ii,i.oi);if(s)if(t.ai&&i.ai)t.oi.x=-s.S*s.l,t.oi.y=-s.N*s.l,i.oi.x=s.S*s.l,i.oi.y=s.N*s.l;else{let h=f(t.oi).l+i.Ei,e=f(i.oi).l+t.Ei,r=t.ai?.1:1,l=i.ai?.1:1;t.oi.x-=s.S*s.l*r*h/(h+e),t.oi.y-=s.N*s.l*r*h/(h+e),i.oi.x+=s.S*s.l*l*e/(h+e),i.oi.y+=s.N*s.l*l*e/(h+e)}},Ji(t){if(!t.Ki)for(let i of function*(t,i,s){yield*function*(t,i,s){let h=[{x:Math.min(t.x,i.x)-s,y:Math.min(t.y,i.y)-s},{x:Math.max(t.x,i.x)+s,y:Math.max(t.y,i.y)+s}];yield*function*(t){for(let i=t[0].y/32|0;32*i<t[1].y;i++)for(let s=t[0].x/32|0;32*s<t[1].x;s++)yield{u:s,r:i}}(h)}(t,{x:t.x+i.x,y:t.y+i.y},s)}(t.M,t.oi,t.ii))if(!E(i.u,i.r)){let s=[w(i),w({u:i.u+1,r:i.r+1})],h=O(t.M,{x:t.M.x+t.oi.x,y:t.M.y+t.oi.y},t.ii,s);h&&(t.ai?0===h.S?t.oi.y=-t.oi.y:0===h.N?t.oi.x=-t.oi.x:(t.oi.x+=h.S,t.oi.y+=h.N):0===h.S?t.oi.y=h.y-t.M.y:0===h.N?t.oi.x=h.x-t.M.x:(t.oi.x+=h.S,t.oi.y+=h.N))}}};class Mt{constructor(t,i){this.start=t,this.si=i,this.p=-1,this.d=20,this.z=101,this.y=5,this.oi=-.7,this.Fi=.09}_t(){++this.p===this.d&&(this.$t=!0),this.y+=this.oi,this.oi+=this.Fi}ri(){let t=this.start-this.si+8;this.p>15&&(o.t.globalAlpha=1-.1*this.p),o.t.drawImage(U.V[2]._,t,3,this.si,3,t+2,this.y,this.si,3),o.t.globalAlpha=1}}const yt={apply(t){let i=!1;for(let s of t)if(s.ti){if(s.dt.length>0){if(106!==s.ns&&107!==s.ns)for(let t of s.dt)s===Nt.C&&Nt.rs.push(new Mt(s.ti,t.si)),s.ti-=t.si,t.hi.l=t.ei,s.oi=y(s.oi,t.hi),s.ci=t,st.dt(s),i=!0;s.dt=[]}s.ti<=0&&106!==s.ns&&(s.ns=106)}i&&q.play(q.dt)}};class At{constructor(t){let i=At.Qi[t];this.Wi=t,this.text=i.text,this.qi=i.qi,this.Ri=i.Ri,this.Oi=i.Oi,this.qi&&(this.Ni=this.Oi=this.Ri=!0),this.p=0,this.d=this.qi?100:40,this.z=102,Nt.U=this}_t(){this.p<this.d&&this.p++,Nt.Yi[this.Wi]=!0,2===this.Wi?g._i.l>0&&(this.$t=!0,Nt.U=!1):4===this.Wi?g.is[g.lt.bt]&&(this.$t=!0,Nt.U=!1):g.is[g.lt.Nt]&&(this.p<this.d?this.p=this.d:(this.$t=!0,Nt.U=!1))}ri(){let t=U.st,i=o.i.s+5,s=o.i.h+8,h=i+8,e=s+12;this.qi||(t=U.ht,i=o.i.s-U.ht._.width/2,s=o.height-U.ht._.height-8,h=i+5,e=s+5),o.t.drawImage(t._,i,s),X.Qt(o.t,D(this.text,this.p,this.d),h,e,115,50,1,X.Ht,X.Jt)}}At.Qi=[{text:"SHOGGOTH'S ARMPIT! THE SHOTGUN ARCANA IS SCATTERED ALL OVER THIS DUNGEON!",qi:!0},{text:"HELP ME FIND MY MISSING PAGES AND REGAIN MY POWERS.",qi:!0},{text:"USE WASD OR mnop TO MOVE",Oi:!0,Ri:!0},{text:"USE l TO FIRE YOUR SHOTGUN",Ri:!0},{text:"USE r TO RELOAD",Oi:!0},{text:"BE CAREFUL OUT THERE, WE NEED THOSE PAGES BACK!",qi:!0},{text:"STABGUTS! LOOK OUT FOR THE POINTY END.",qi:!0},{text:"SPINDOCTORS! YOU'LL GET MORE THAN A HAIRCUT FROM THOSE THINGS.",qi:!0},{text:"DON'T FORGET, PICK UP LOST PAGES TO RECOVER SOME HEALTH!",qi:!0}];const wt={apply(){if(!Nt.U&&!Nt.R&&Nt.es>20)for(let t=0;t<At.Qi.length;t++)if(Nt.Di[t]&&!Nt.Yi[t])return void Nt.rs.push(new At(t))}},xt={apply(){if(Nt.C.ls>=404&&!Nt.wi){xt.es=0,Nt.wi=!0,Nt.C.M=m(Nt.P.Ct[25]),Nt.R=!1;for(let t of Nt.rs)t.Vi&&(t.ns=106)}else if(Nt.wi){xt.es++,10===xt.es&&(Nt.rs.push(new ht(Nt.C.M)),Nt.Xt.push(new $(20,20,90)));let t=Nt.rs.filter(t=>t.Vi).length;if(xt.es%30==0&&t<25){let t=y(Nt.C.M,u(Math.random()*n,48)),i=new(0,[ot,ot,ft][3*Math.random()|0])(t);Nt.rs.push(i),Nt.rs.push(new ht(t))}}}},Tt={ri(){let t=o.t,i=Nt.P,s=o.i.s-Nt.A.M.x,h=o.i.h-Nt.A.M.y,e=0,r=i.v,l=0,n=i.w;Nt.R?(e=Nt.R.D.r,r=e+Nt.R.D.v,l=Nt.R.D.u,n=l+Nt.R.D.w,o.t.fillStyle=b(20,20,20,1),o.o()):o.t.drawImage(U.$._,-16-Nt.A.M.x%32,-8-Nt.A.M.y%32);for(let o=e;o<r;o++)for(let e=l;e<n;e++){let r=32*e+s,l=32*o+h;if(r<-50||l<-50||r>500||l>500)continue;let n=U.K[i.P[o][e]?1:0];t.drawImage(n._,r,l)}for(let o=e;o<r;o++)for(let e=l;e<n;e++){let r=32*e+s,l=32*o+h;r<-50||l<-50||r>500||l>500||(8&i.F[o][e]&&t.drawImage(U.F._,0,0,36,4,r-2,l-2,36,4),4&i.F[o][e]&&t.drawImage(U.F._,32,0,4,36,r+30,l-2,4,36),2&i.F[o][e]&&t.drawImage(U.F._,0,32,36,4,r-2,l+30,36,4),1&i.F[o][e]&&t.drawImage(U.F._,0,0,4,36,r-2,l-2,4,36),Nt.R&&(128&i.F[o][e]&&t.drawImage(U.it._,0,0,36,4,r-2,l-2,36,4),64&i.F[o][e]&&t.drawImage(U.it._,32,0,4,36,r+30,l-2,4,36),32&i.F[o][e]&&t.drawImage(U.it._,0,32,36,4,r-2,l+30,36,4),16&i.F[o][e]&&t.drawImage(U.it._,0,0,4,36,r-2,l-2,4,36)))}if(!Nt.R)for(let t of Object.values(i.Ct))if(t.Vt>=3&&!Nt.ji[t.Vt]){let i=x({x:32*(t.u+t.w/2),y:32*(t.r+t.v/2)});o.t.globalAlpha=1-Nt.es%30/30,X.Ft(o.t,"!",i.s-4,i.h-10,4,X.red,X.Kt),o.t.globalAlpha=1}}},Nt=new class{init(){U.q(()=>{o.init(),U.init(),X.init(),g.init(),q.init(),this.P=z.jt(),this.rs=[],this.Di={},this.Yi={},this.ji={},this.zi=R(500,500),this.Zi=0,this.Xt=[],this.C=new nt,this.rs.push(this.C),this.A={M:{...this.C.M}},window.addEventListener("blur",()=>this.$i()),window.addEventListener("focus",()=>this.ts()),this.start()})}start(){this.es=0,this.Xi(),window.requestAnimationFrame(()=>this.Bi(1))}Bi(t){this.es++,o.n(),this.Xi(),this.ri(o.t),window.requestAnimationFrame(()=>this.Bi(t))}Xi(){if(g.Xi(),g.is[g.lt.ct]&&(this.as?this.ts():this.$i()),this.as)return;q.Xi();for(let t of Nt.rs)t._t&&t._t();yt.apply(this.rs),ct.apply(this.rs),wt.apply(),ut.apply(),xt.apply(),this.rs=this.rs.filter(t=>!t.$t);let t=this.C.M.x-this.A.M.x,i=this.C.M.y-this.A.M.y;this.A.M.x+=.2*t,this.A.M.y+=.2*i,this.Xt=this.Xt.filter(t=>t.Xi()),Nt.es%6==0&&(this.Zi=10*Math.random()|0),30===Nt.es&&Nt.Xt.push(new $(20,20,20)),g.is[g.lt.Nt]&&!Nt.Pi&&(Nt.Pi=!0)}ri(){o.t.setTransform(1,0,0,1,0,0),o.t.scale(o.scale,o.scale);let t=0,i=0;this.Xt.forEach(s=>{t+=s.x,i+=s.y}),o.t.translate(t,i),Tt.ri();for(let t of this.rs)(t.z>0||!t.z)&&t.ri();o.t.drawImage(U.tt._,0,0,500,500,0-this.Zi,0-this.Zi,o.width+2*this.Zi,o.height+2*this.Zi),et.ri();for(let t of this.rs)t.z&&t.z>100&&t.ri();if(Nt.es<120&&(o.t.fillStyle=b(0,0,0,1-Nt.es/120),o.o()),Nt.es>=30&&!Nt.Pi){let t="WIZARD WITH A SHOTGUN",i=X.Wt(t,3);X.Ft(o.t,t,(o.width-i)/2,o.height/2,3,X.gt,X.red)}xt.es=xt.es||0,xt.es++,o.t.fillStyle=b(240,20,20,N(xt.es/3e4,0,.7)),o.o(),X.Qt(o.t,D("WAIT! THE PORTAL HOME! IT'S NOT SUPPOSED TO END THIS WAY...",xt.es,15e3),40,40,o.width-80,o.t.height-80,2,X.gt,X.red)}$i(){this.as||(this.as=!0,q.$i())}ts(){this.as&&(this.as=!1,q.ts())}};Nt.init()}();
//# sourceMappingURL=app.js.map</script>